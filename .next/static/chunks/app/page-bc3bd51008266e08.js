(self["webpackChunk_N_E"]=self["webpackChunk_N_E"]||[]).push([[974],{13489:(e,s,t)=>{Promise.resolve().then(t.bind(t,42337))},42337:(e,s,t)=>{"use strict";t.r(s);t.d(s,{"default":()=>s0});var a={};t.r(a);t.d(a,{tU:()=>sc,av:()=>sm,j7:()=>sd,Xi:()=>so});var r=t(26027);var i=t(57307);var l=t(98471);var n=t(96084);var c=t(30050);var d=t(86011);function o(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++){s[t]=arguments[t]}return(0,d.QP)((0,c.$)(s))};const m=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}});const h=i.forwardRef((e,s)=>{let{className:t,variant:a,size:i,asChild:n=false,...c}=e;const d=n?l.DX:"button";return(0,r.jsx)(d,{className:o(m({variant:a,size:i,className:t})),ref:s,...c})});h.displayName="Button";const x=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});x.displayName="Card";const u=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:o("flex flex-col space-y-1.5 p-6",t),...a})});u.displayName="CardHeader";const p=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:o("text-2xl font-semibold leading-none tracking-tight",t),...a})});p.displayName="CardTitle";const f=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:o("text-sm text-muted-foreground",t),...a})});f.displayName="CardDescription";const g=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:o("p-6 pt-0",t),...a})});g.displayName="CardContent";const j=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:o("flex items-center p-6 pt-0",t),...a})});j.displayName="CardFooter";var v=t(36815);var y=t(54625);var b=t(91600);var N=t(98787);var w=t(64494);var k=t(6558);var S=t(33546);var A=t(42546);const C=1;const D=1e6;const R={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let F=0;function I(){F=(F+1)%Number.MAX_SAFE_INTEGER;return F.toString()}const P=new Map;const z=e=>{if(P.has(e)){return}const s=setTimeout(()=>{P.delete(e);O({type:"REMOVE_TOAST",toastId:e})},D);P.set(e,s)};const E=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,C)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{const{toastId:t}=s;if(t){z(t)}else{e.toasts.forEach(e=>{z(e.id)})}return{...e,toasts:e.toasts.map(e=>e.id===t||t===undefined?{...e,open:false}:e)}}case"REMOVE_TOAST":if(s.toastId===undefined){return{...e,toasts:[]}}return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}};const T=[];let M={toasts:[]};function O(e){M=E(M,e);T.forEach(e=>{e(M)})}function L(e){let{...s}=e;const t=I();const a=e=>O({type:"UPDATE_TOAST",toast:{...e,id:t}});const r=()=>O({type:"DISMISS_TOAST",toastId:t});O({type:"ADD_TOAST",toast:{...s,id:t,open:true,onOpenChange:e=>{if(!e)r()}}});return{id:t,dismiss:r,update:a}}function V(){const[e,s]=i.useState(M);i.useEffect(()=>{T.push(s);return()=>{const e=T.indexOf(s);if(e>-1){T.splice(e,1)}}},[e]);return{...e,toast:L,dismiss:e=>O({type:"DISMISS_TOAST",toastId:e})}}var H=t(92972);var G=t(26593);var W=t(30691);var J=t(85523);var _=t(83418);var B=t(96732);const Y=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",warning:"border-yellow-500/50 text-yellow-700 dark:text-yellow-300 dark:border-yellow-500/30 bg-yellow-50 dark:bg-yellow-900/20 [&>svg]:text-yellow-600 dark:text-yellow-300",success:"border-green-500/50 text-green-700 dark:text-green-300 dark:border-green-500/30 bg-green-50 dark:bg-green-900/20 [&>svg]:text-green-600 dark:text-green-300"}},defaultVariants:{variant:"default"}});const U=i.forwardRef((e,s)=>{let{className:t,variant:a,...i}=e;return(0,r.jsx)("div",{ref:s,role:"alert",className:o(Y({variant:a}),t),...i})});U.displayName="Alert";const q=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h5",{ref:s,className:o("mb-1 font-medium leading-none tracking-tight",t),...a})});q.displayName="AlertTitle";const X=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:o("text-sm [&_p]:leading-relaxed",t),...a})});X.displayName="AlertDescription";const K=i.forwardRef((e,s)=>{let{className:t,value:a,max:i=100,...l}=e;const n=a!=null?Math.min(Math.max(0,a),i):0;return(0,r.jsx)("div",{ref:s,className:o("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,r.jsx)("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-n/i*100,"%)")}})})});K.displayName="Progress";var Z=t(62841);var Q=t(57866);function $(e){let{onImportComplete:s}=e;const[t,a]=(0,i.useState)(null);const[l,n]=(0,i.useState)(null);const[c,d]=(0,i.useState)(false);const[o,m]=(0,i.useState)(0);const[u,p]=(0,i.useState)("");const[f,g]=(0,i.useState)(null);const[j,y]=(0,i.useState)(null);const N=(0,i.useRef)(null);const{toast:w}=V();const S=e=>{y(null);g(null);if(e.target.files&&e.target.files.length>0){const s=e.target.files[0];if(!s.type.startsWith("image/")){y("Please select an image file (JPG, PNG, etc.)");return}a(s);const t=URL.createObjectURL(s);n(t)}};const A=()=>{if(N.current){N.current.click()}};const C=()=>{a(null);n(null);g(null);if(N.current){N.current.value=""}};const D=async()=>{if(!t)return;d(true);m(0);p("Initializing image processing...");y(null);try{await R("Analyzing image...",20);await R("Detecting nodes and connections...",40);await R("Performing OCR on text elements...",60);await R("Building mind map structure...",80);await R("Calculating combinations...",90);const e=F();g(e);m(100);p("Processing complete!");w({title:"Mind Map Processed Successfully",description:"Detected ".concat(e.totalCombinations," possible combinations.")})}catch(e){y("Error processing image. Please try a clearer image of a mind map.");w({title:"Processing Failed",description:"Could not process the mind map image.",variant:"destructive"})}finally{d(false)}};const R=async(e,s)=>{return new Promise(t=>{setTimeout(()=>{p(e);m(s);t()},800)})};const F=()=>{var e,s,t,a,r,i,l,n,c,d,o,m,h,x,u,p,f,g,j,v,y,b,N,w,k,S,A,C;const D={id:"root",name:"Dike settlement factors table",level:0,children:[{id:"dike-size",name:"Dike size",level:1,children:[{id:"height",name:"Height",level:2,children:[{id:"height-5m",name:"5m",level:3,children:[]},{id:"height-7.5m",name:"7.5m",level:3,children:[]},{id:"height-10m",name:"10m",level:3,children:[]}]},{id:"width",name:"Width",level:2,children:[{id:"width-20m",name:"20m",level:3,children:[]},{id:"width-25m",name:"25m",level:3,children:[]},{id:"width-30m",name:"30m",level:3,children:[]}]},{id:"slope-ratio",name:"Slope ratio(V:H)",level:2,children:[{id:"ratio-1:1.2",name:"1:1.2",level:3,children:[]},{id:"ratio-1:1.5",name:"1:1.5",level:3,children:[]},{id:"ratio-1:1.8",name:"1:1.8",level:3,children:[]}]}]},{id:"earthquake",name:"Earthquake",level:1,children:[{id:"pga",name:"PGA",level:2,children:[{id:"pga-0.1g",name:"0.1g",level:3,children:[]},{id:"pga-0.2g",name:"0.2g",level:3,children:[]},{id:"pga-0.3g",name:"0.3g",level:3,children:[]}]}]},{id:"thickness-ratio",name:"Liquifiable and nonliquifiable thickness ratio",level:1,children:[{id:"h1h2",name:"H1/(H1+H2)",level:2,children:[{id:"h1h2-0.6",name:"0.6",level:3,children:[]},{id:"h1h2-0.4",name:"0.4",level:3,children:[]},{id:"h1h2-0.2",name:"0.2",level:3,children:[]}]},{id:"groundwater",name:"Groundwater table",level:2,children:[{id:"gw-1m",name:"-1m",level:3,children:[]},{id:"gw-3m",name:"-3m",level:3,children:[]},{id:"gw-5m",name:"-5m",level:3,children:[]}]}]},{id:"relative-density",name:"Relative density",level:1,children:[{id:"density-30",name:"Dr=30%",level:2,children:[]},{id:"density-50",name:"Dr=50%",level:2,children:[]},{id:"density-70",name:"Dr=70%",level:2,children:[]}]},{id:"inclination",name:"Inclination angle of stratum",level:1,children:[{id:"inclination-1",name:"1 degree",level:2,children:[]},{id:"inclination-3",name:"3 degrees",level:2,children:[]},{id:"inclination-5",name:"5 degrees",level:2,children:[]}]}]};const R=((a=D.children.find(e=>e.id==="dike-size"))===null||a===void 0?void 0:(t=a.children)===null||t===void 0?void 0:(s=t.find(e=>e.id==="height"))===null||s===void 0?void 0:(e=s.children)===null||e===void 0?void 0:e.length)||0;const F=((n=D.children.find(e=>e.id==="dike-size"))===null||n===void 0?void 0:(l=n.children)===null||l===void 0?void 0:(i=l.find(e=>e.id==="width"))===null||i===void 0?void 0:(r=i.children)===null||r===void 0?void 0:r.length)||0;const I=((m=D.children.find(e=>e.id==="dike-size"))===null||m===void 0?void 0:(o=m.children)===null||o===void 0?void 0:(d=o.find(e=>e.id==="slope-ratio"))===null||d===void 0?void 0:(c=d.children)===null||c===void 0?void 0:c.length)||0;const P=((p=D.children.find(e=>e.id==="earthquake"))===null||p===void 0?void 0:(u=p.children)===null||u===void 0?void 0:(x=u.find(e=>e.id==="pga"))===null||x===void 0?void 0:(h=x.children)===null||h===void 0?void 0:h.length)||0;const z=((v=D.children.find(e=>e.id==="thickness-ratio"))===null||v===void 0?void 0:(j=v.children)===null||j===void 0?void 0:(g=j.find(e=>e.id==="h1h2"))===null||g===void 0?void 0:(f=g.children)===null||f===void 0?void 0:f.length)||0;const E=((w=D.children.find(e=>e.id==="thickness-ratio"))===null||w===void 0?void 0:(N=w.children)===null||N===void 0?void 0:(b=N.find(e=>e.id==="groundwater"))===null||b===void 0?void 0:(y=b.children)===null||y===void 0?void 0:y.length)||0;const T=((S=D.children.find(e=>e.id==="relative-density"))===null||S===void 0?void 0:(k=S.children)===null||k===void 0?void 0:k.length)||0;const M=((C=D.children.find(e=>e.id==="inclination"))===null||C===void 0?void 0:(A=C.children)===null||A===void 0?void 0:A.length)||0;const O=R*F*I*P*z*E*T*M;const L=D.children.map(e=>e.name);const V={};const H={};D.children.forEach(e=>{if(e.children.length>0){V[e.name]=e.children.map(e=>e.name);e.children.forEach(e=>{if(e.children.length>0){H[e.name]=e.children.map(e=>e.name)}})}});return{structure:D,totalCombinations:O,categories:L,subcategories:V,values:H}};const I=e=>{return{id:e.id,name:e.name,children:e.children.map(e=>I(e))}};const P=()=>{if(!f)return;const e=I(f.structure);if(e.children){const s=["#f87171","#facc15","#4ade80","#3b82f6","#a855f7","#ec4899"];e.children.forEach((e,t)=>{e.color=s[t%s.length]})}s(e);w({title:"Mind Map Structure Applied",description:"The detected structure has been applied to the mind map."})};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-xl font-medium flex items-center",children:[(0,r.jsx)(H.A,{className:"h-5 w-5 mr-2 text-blue-500"}),"Mind Map Image Import"]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload an image of your mind map to automatically detect its structure"})]}),(0,r.jsx)("input",{type:"file",ref:N,className:"hidden",accept:"image/*",onChange:S}),(0,r.jsxs)(h,{onClick:A,disabled:c,className:"group transition-all duration-300",children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4 group-hover:scale-110 transition-transform duration-300"}),"Select Image"]})]}),j&&(0,r.jsx)(Z.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,r.jsxs)(U,{variant:"destructive",children:[(0,r.jsx)(G.A,{className:"h-4 w-4"}),(0,r.jsx)(q,{children:"Error"}),(0,r.jsx)(X,{children:j})]})}),(0,r.jsx)(Q.N,{children:t&&(0,r.jsx)(Z.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(0,r.jsx)(x,{className:"p-6 border border-gray-200 dark:border-gray-800 shadow-md",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h4",{className:"font-medium mb-4 flex items-center",children:[(0,r.jsx)(W.A,{className:"h-5 w-5 mr-2 text-blue-500"}),"Selected Image"]}),(0,r.jsx)("div",{className:"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-900 shadow-inner relative group",children:l&&(0,r.jsxs)("div",{className:"relative w-full h-[300px]",children:[(0,r.jsx)(B["default"],{src:l||"/placeholder.svg",alt:"Mind Map Preview",fill:true,className:"object-contain"}),(0,r.jsx)("button",{onClick:C,className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,r.jsx)(J.A,{className:"h-4 w-4"})})]})}),(0,r.jsxs)("div",{className:"mt-4 flex justify-between",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500 flex items-center",children:[(0,r.jsx)(H.A,{className:"h-4 w-4 mr-1 text-blue-500"}),t.name," (",Math.round(t.size/1024)," KB)"]}),(0,r.jsx)(h,{onClick:D,disabled:c,variant:c?"outline":"default",className:"relative overflow-hidden",children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Process Image"]})})]}),c&&(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsx)(K,{value:o,className:"h-2"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 flex items-center",children:[(0,r.jsx)(b.A,{className:"h-3 w-3 mr-2 animate-spin"}),u]})]})]}),f&&(0,r.jsxs)(Z.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.2},children:[(0,r.jsxs)("h4",{className:"font-medium mb-4 flex items-center",children:[(0,r.jsx)(_.A,{className:"h-5 w-5 mr-2 text-green-500"}),"Detection Results"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md flex items-start",children:[(0,r.jsx)(_.A,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-2 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-green-800 dark:text-green-300",children:"Mind Map Structure Detected"}),(0,r.jsxs)("p",{className:"text-sm text-green-700 dark:text-green-400",children:["Total combinations: ",f.totalCombinations.toLocaleString()]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h5",{className:"font-medium text-sm mb-2",children:["Main Categories (",f.categories.length,")"]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:f.categories.map((e,s)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-xs",children:e},s))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-medium text-sm mb-2",children:"Structure Preview"}),(0,r.jsx)("div",{className:"text-xs border rounded-md p-3 max-h-[200px] overflow-y-auto font-mono bg-gray-50 dark:bg-gray-900 shadow-inner",children:(0,r.jsx)("pre",{className:"text-gray-700 dark:text-gray-300",children:JSON.stringify(f.structure,null,2)})})]}),(0,r.jsxs)(h,{onClick:P,className:"w-full group",children:[(0,r.jsx)(_.A,{className:"mr-2 h-4 w-4 group-hover:scale-110 transition-transform duration-300"}),"Apply Structure to Mind Map"]})]})]})]})})})}),!t&&(0,r.jsx)(Z.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-8 text-center",children:[(0,r.jsx)("div",{className:"mx-auto w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center mb-4",children:(0,r.jsx)(H.A,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Drag & Drop Your Mind Map Image"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Or click the button below to browse your files"}),(0,r.jsxs)(h,{onClick:A,className:"mx-auto",children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Browse Files"]}),(0,r.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-4",children:"Supported formats: JPG, PNG, GIF, BMP"})]})})]})};const ee=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100"}},defaultVariants:{variant:"default"}});function es(e){let{className:s,variant:t,...a}=e;return(0,r.jsx)("div",{className:o(ee({variant:t}),s),...a})};function et(e){const s=e.replace(/^#/,"");const t=parseInt(s.substring(0,2),16);const a=parseInt(s.substring(2,4),16);const r=parseInt(s.substring(4,6),16);const i=(.299*t+.587*a+.114*r)/255;return i>.5?"#000000":"#FFFFFF"}const ea={id:"root",name:"Dike settlement factors table",children:[{id:"dike-size",name:"Dike size",color:"#f87171",children:[{id:"height",name:"Height",children:[{id:"height-5m",name:"5m"},{id:"height-7.5m",name:"7.5m"},{id:"height-10m",name:"10m"}]},{id:"width",name:"Width",children:[{id:"width-20m",name:"20m"},{id:"width-25m",name:"25m"},{id:"width-30m",name:"30m"}]},{id:"slope-ratio",name:"Slope ratio(V:H)",children:[{id:"ratio-1:1.2",name:"1:1.2"},{id:"ratio-1:1.5",name:"1:1.5"},{id:"ratio-1:1.8",name:"1:1.8"}]}]},{id:"earthquake",name:"Earthquake",color:"#facc15",children:[{id:"pga",name:"PGA",children:[{id:"pga-0.1g",name:"0.1g"},{id:"pga-0.2g",name:"0.2g"},{id:"pga-0.3g",name:"0.3g"}]}]},{id:"thickness-ratio",name:"Liquifiable and nonliquifiable thickness ratio",color:"#4ade80",children:[{id:"h1h2",name:"H1/(H1+H2)",children:[{id:"h1h2-0.6",name:"0.6"},{id:"h1h2-0.4",name:"0.4"},{id:"h1h2-0.2",name:"0.2"}]},{id:"groundwater",name:"Groundwater table",children:[{id:"gw-1m",name:"-1m"},{id:"gw-3m",name:"-3m"},{id:"gw-5m",name:"-5m"}]}]},{id:"relative-density",name:"Relative density",color:"#3b82f6",children:[{id:"density-30",name:"Dr=30%"},{id:"density-50",name:"Dr=50%"},{id:"density-70",name:"Dr=70%"}]},{id:"inclination",name:"Inclination angle of stratum",color:"#a855f7",children:[{id:"inclination-1",name:"1 degree"},{id:"inclination-3",name:"3 degrees"},{id:"inclination-5",name:"5 degrees"}]}]};function er(){var e,s,t;const[a,l]=(0,i.useState)({id:"root",name:"Dike settlement factors table",children:[]});const[n,c]=(0,i.useState)(false);const[d,o]=(0,i.useState)("visualization");const[m,u]=(0,i.useState)(false);const[p,f]=(0,i.useState)(false);const[g,j]=(0,i.useState)(false);const{toast:C}=V();const D=(0,i.useRef)(null);const R=()=>{c(true);setTimeout(()=>{c(false);u(true);C({title:"Mind Map Saved",description:"Your mind map has been saved successfully."});localStorage.setItem("mindMapData",JSON.stringify(a));setTimeout(()=>u(false),2e3)},1e3)};const F=()=>{f(true);setTimeout(()=>{l(ea);f(false);C({title:"Sample Mind Map Generated",description:"A sample mind map has been generated for demonstration."});localStorage.setItem("mindMapData",JSON.stringify(ea))},1500)};const I=()=>{if(!a.children||a.children.length===0)return 0;const e=a.children||[];const s=(s,t)=>{var a,r;const i=e.find(e=>e.id===s);if(!i)return[];const l=(a=i.children)===null||a===void 0?void 0:a.find(e=>e.id===t);if(!l)return[];return((r=l.children)===null||r===void 0?void 0:r.map(e=>e.name))||[]};const t=s=>{var t;const a=e.find(e=>e.id===s);if(!a)return[];return((t=a.children)===null||t===void 0?void 0:t.map(e=>e.name))||[]};const r=s("dike-size","height");const i=s("dike-size","width");const l=s("dike-size","slope-ratio");const n=s("earthquake","pga");const c=s("thickness-ratio","h1h2");const d=s("thickness-ratio","groundwater");const o=t("relative-density");const m=t("inclination");return r.length*i.length*l.length*n.length*c.length*d.length*o.length*m.length};const P=e=>{l(e);o("visualization");C({title:"Mind Map Imported",description:"The mind map structure has been imported successfully."});localStorage.setItem("mindMapData",JSON.stringify(e))};(0,i.useEffect)(()=>{const e=localStorage.getItem("mindMapData");if(e){try{l(JSON.parse(e))}catch(e){console.error("Failed to parse saved mind map data")}}},[]);return(0,r.jsxs)("div",{className:"space-y-6 p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-xl font-medium flex items-center",children:["Mind Map Visualization",a.children&&a.children.length>0&&(0,r.jsxs)(es,{variant:"outline",className:"ml-2 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[a.children.length," Categories"]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"The mind map structure determines the checklist combinations"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)(h,{variant:"outline",size:"sm",onClick:()=>o("import"),className:"group transition-all duration-300 hover:bg-blue-50 dark:hover:bg-blue-900",children:[(0,r.jsx)(v.A,{className:"h-4 w-4 mr-2 group-hover:scale-110 transition-transform duration-300"}),"Import Mind Map"]}),(0,r.jsxs)(h,{variant:"outline",size:"sm",onClick:()=>j(!g),className:"group transition-all duration-300 hover:bg-amber-50 dark:hover:bg-amber-900",children:[(0,r.jsx)(y.A,{className:"h-4 w-4 mr-2 group-hover:text-amber-500 transition-colors duration-300"}),g?"Hide Tips":"Show Tips"]}),(0,r.jsx)(h,{onClick:R,disabled:n||((e=a.children)===null||e===void 0?void 0:e.length)===0,className:"relative overflow-hidden group",children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.A,{className:"mr-2 h-4 w-4 group-hover:scale-110 transition-transform duration-300"}),"Save Mind Map",m&&(0,r.jsx)(Z.P.span,{className:"absolute inset-0 bg-green-500/20",initial:{x:"-100%"},animate:{x:"100%"},transition:{duration:1}})]})})]})]}),(0,r.jsx)(Q.N,{children:g&&(0,r.jsx)(Z.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:(0,r.jsx)(x,{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800",children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h4",{className:"font-medium text-amber-800 dark:text-amber-300 mb-2",children:"Mind Map Tips"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 text-sm space-y-1 text-amber-700 dark:text-amber-300",children:[(0,r.jsx)("li",{children:"Import an image of your mind map to automatically detect its structure"}),(0,r.jsx)("li",{children:"The mind map structure determines all possible combinations for your checklist"}),(0,r.jsx)("li",{children:"Each main category can have multiple subcategories and values"}),(0,r.jsx)("li",{children:"You can generate a sample mind map to see how it works"}),(0,r.jsx)("li",{children:"Save your mind map to use it for generating checklists"})]})]})})})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"border-b",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("button",{onClick:()=>o("visualization"),className:"px-4 py-3 relative ".concat(d==="visualization"?"border-b-2 border-primary font-medium text-primary":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:["Visualization",d==="visualization"&&(0,r.jsx)(Z.P.span,{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary",layoutId:"activeTab"})]}),(0,r.jsxs)("button",{onClick:()=>o("import"),className:"px-4 py-3 relative ".concat(d==="import"?"border-b-2 border-primary font-medium text-primary":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:["Import from Image",d==="import"&&(0,r.jsx)(Z.P.span,{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary",layoutId:"activeTab"})]})]})}),(0,r.jsxs)("div",{className:"mt-4",children:[d==="visualization"&&(0,r.jsx)("div",{children:a.children&&a.children.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"border rounded-lg p-4 bg-white dark:bg-gray-100 overflow-auto shadow-inner",children:(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("div",{ref:D,className:"relative w-full h-[500px] flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-4 py-2 rounded-lg font-medium mb-4",children:a.name}),(0,r.jsx)("div",{className:"flex flex-wrap justify-center gap-8 max-w-4xl",children:a.children.map((e,s)=>(0,r.jsxs)(Z.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s*.1},className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"px-4 py-2 rounded-lg font-medium mb-4 shadow-md",style:{backgroundColor:e.color?"".concat(e.color,"20"):undefined,borderLeft:e.color?"4px solid ".concat(e.color):undefined,color:e.color?et(e.color):"inherit"},children:e.name}),e.children&&e.children.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap justify-center gap-4 max-w-xs",children:e.children.map(e=>(0,r.jsxs)(Z.P.div,{whileHover:{scale:1.05},className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-lg text-sm mb-2",children:e.name}),e.children&&e.children.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap justify-center gap-2 max-w-[150px]",children:e.children.map(e=>(0,r.jsx)("span",{className:"px-2 py-0.5 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 rounded text-xs border border-gray-200 dark:border-gray-700",children:e.name},e.id))})]},e.id))})]},e.id))})]})})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[(0,r.jsxs)(x,{className:"p-6 border border-gray-200 dark:border-gray-800 shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,r.jsxs)("h3",{className:"font-medium mb-4 flex items-center",children:[(0,r.jsx)(w.A,{className:"h-5 w-5 mr-2 text-blue-500"}),"Mind Map Structure"]}),(0,r.jsxs)("div",{className:"text-sm space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"font-medium mr-2",children:"Main Category:"}),(0,r.jsx)("span",{className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-0.5 rounded text-xs",children:a.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium mr-2",children:"Primary Categories:"}),(0,r.jsx)("span",{className:"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-200 px-2 py-0.5 rounded text-xs",children:((s=a.children)===null||s===void 0?void 0:s.length)||0})]}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("ul",{className:"list-disc pl-5 space-y-1",children:(t=a.children)===null||t===void 0?void 0:t.map(e=>{var s;return(0,r.jsxs)(Z.P.li,{whileHover:{x:5},className:"transition-colors duration-200 hover:text-blue-600 dark:hover:text-blue-400",children:[(0,r.jsx)("span",{style:{color:e.color},children:e.name})," (",((s=e.children)===null||s===void 0?void 0:s.length)||0," ","subcategories)"]},e.id)})})})]})]}),(0,r.jsxs)(x,{className:"p-6 border border-gray-200 dark:border-gray-800 shadow-sm hover:shadow-md transition-shadow duration-300",children:[(0,r.jsxs)("h3",{className:"font-medium mb-4 flex items-center",children:[(0,r.jsx)(k.A,{className:"h-5 w-5 mr-2 text-green-500"}),"Total Combinations"]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(Z.P.p,{className:"text-3xl font-bold text-green-600 dark:text-green-400",initial:{scale:.8},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:10},children:I().toLocaleString()}),(0,r.jsx)("span",{className:"ml-2 px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 text-xs rounded-full",children:"Combinations"})]}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Total possible combinations based on current mind map structure"}),(0,r.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,r.jsxs)(h,{variant:"outline",size:"sm",className:"w-full",children:[(0,r.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Export Structure"]}),(0,r.jsxs)(h,{variant:"outline",size:"sm",className:"w-full",children:[(0,r.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Add Category"]})]})]})]})]})]}):(0,r.jsx)("div",{className:"border rounded-lg p-8 bg-white dark:bg-gray-950 flex flex-col items-center justify-center min-h-[400px] shadow-inner",children:(0,r.jsx)("div",{className:"text-center max-w-md",children:(0,r.jsxs)(Z.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,r.jsx)("div",{className:"w-24 h-24 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(v.A,{className:"h-10 w-10 text-blue-600 dark:text-blue-400"})}),(0,r.jsx)("h3",{className:"text-xl font-medium mb-2",children:"No Mind Map Available"}),(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Please import a mind map image to visualize the structure and generate combinations."}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,r.jsxs)(h,{onClick:()=>o("import"),className:"w-full sm:w-auto",children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Import Mind Map"]}),(0,r.jsx)(h,{variant:"outline",onClick:F,disabled:p,className:"w-full sm:w-auto",children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Generate Sample"]})})]})]})})})}),d==="import"&&(0,r.jsx)($,{onImportComplete:P})]})]})]})}var ei=t(39419);const el=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(ei.bL,{ref:s,className:o("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:(0,r.jsx)(ei.C1,{className:o("flex items-center justify-center text-current"),children:(0,r.jsx)(_.A,{className:"h-4 w-4"})})})});el.displayName=ei.bL.displayName;const en=i.forwardRef((e,s)=>{let{className:t,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...i})});en.displayName="Input";const ec=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:s,className:o("w-full caption-bottom text-sm",t),...a})})});ec.displayName="Table";const ed=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("thead",{ref:s,className:o("[&_tr]:border-b",t),...a})});ed.displayName="TableHeader";const eo=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tbody",{ref:s,className:o("[&_tr:last-child]:border-0",t),...a})});eo.displayName="TableBody";const em=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tfoot",{ref:s,className:o("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a})});em.displayName="TableFooter";const eh=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("tr",{ref:s,className:o("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a})});eh.displayName="TableRow";const ex=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("th",{ref:s,className:o("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a})});ex.displayName="TableHead";const eu=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("td",{ref:s,className:o("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a})});eu.displayName="TableCell";const ep=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("caption",{ref:s,className:o("mt-4 text-sm text-muted-foreground",t),...a})});ep.displayName="TableCaption";var ef=t(55544);var eg=t(32702);var ej=t(20707);var ev=t(6112);var ey=t(86425);const eb=ej.bL;const eN=ej.YJ;const ew=ej.WT;const ek=i.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(ej.l9,{ref:s,className:o("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[a,(0,r.jsx)(ej.In,{asChild:true,children:(0,r.jsx)(ev.A,{className:"h-4 w-4 opacity-50"})})]})});ek.displayName=ej.l9.displayName;const eS=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(ej.PP,{ref:s,className:o("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(ey.A,{className:"h-4 w-4"})})});eS.displayName=ej.PP.displayName;const eA=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(ej.wn,{ref:s,className:o("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(ev.A,{className:"h-4 w-4"})})});eA.displayName=ej.wn.displayName;const eC=i.forwardRef((e,s)=>{let{className:t,children:a,position:i="popper",...l}=e;return(0,r.jsx)(ej.ZL,{children:(0,r.jsxs)(ej.UC,{ref:s,className:o("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...l,children:[(0,r.jsx)(eS,{}),(0,r.jsx)(ej.LM,{className:o("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(eA,{})]})})});eC.displayName=ej.UC.displayName;const eD=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(ej.JU,{ref:s,className:o("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a})});eD.displayName=ej.JU.displayName;const eR=i.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(ej.q7,{ref:s,className:o("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(ej.VF,{children:(0,r.jsx)(_.A,{className:"h-4 w-4"})})}),(0,r.jsx)(ej.p4,{children:a})]})});eR.displayName=ej.q7.displayName;const eF=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(ej.wv,{ref:s,className:o("-mx-1 my-1 h-px bg-muted",t),...a})});eF.displayName=ej.wv.displayName;var eI=t(4433);var eP=t(39034);var ez=t(74485);const eE=e=>{let{className:s,...t}=e;return(0,r.jsx)("nav",{role:"navigation","aria-label":"pagination",className:o("mx-auto flex w-full justify-center",s),...t})};eE.displayName="Pagination";const eT=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("ul",{ref:s,className:o("flex flex-row items-center gap-1",t),...a})});eT.displayName="PaginationContent";const eM=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("li",{ref:s,className:o("",t),...a})});eM.displayName="PaginationItem";const eO=e=>{let{className:s,isActive:t,size:a="icon",...i}=e;return(0,r.jsx)("a",{"aria-current":t?"page":undefined,className:o(m({variant:t?"outline":"ghost",size:a}),s),...i})};eO.displayName="PaginationLink";const eL=e=>{let{className:s,...t}=e;return(0,r.jsxs)(eO,{"aria-label":"Go to previous page",size:"default",className:o("gap-1 pl-2.5",s),...t,children:[(0,r.jsx)(eI.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Previous"})]})};eL.displayName="PaginationPrevious";const eV=e=>{let{className:s,...t}=e;return(0,r.jsxs)(eO,{"aria-label":"Go to next page",size:"default",className:o("gap-1 pr-2.5",s),...t,children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(eP.A,{className:"h-4 w-4"})]})};eV.displayName="PaginationNext";const eH=e=>{let{className:s,...t}=e;return(0,r.jsxs)("span",{"aria-hidden":true,className:o("flex h-9 w-9 items-center justify-center",s),...t,children:[(0,r.jsx)(ez.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"More pages"})]})};eH.displayName="PaginationEllipsis";var eG=t(97207);var eW=t(61138);const eJ=eG.bL;const e_=eG.l9;const eB=eG.bm;const eY=eG.ZL;const eU=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(eG.hJ,{className:o("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:s})});eU.displayName=eG.hJ.displayName;const eq=(0,n.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}});const eX=i.forwardRef((e,s)=>{let{side:t="right",className:a,children:i,...l}=e;return(0,r.jsxs)(eY,{children:[(0,r.jsx)(eU,{}),(0,r.jsxs)(eG.UC,{ref:s,className:o(eq({side:t}),a),...l,children:[i,(0,r.jsxs)(eG.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(eW.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eX.displayName=eG.UC.displayName;const eK=e=>{let{className:s,...t}=e;return(0,r.jsx)("div",{className:o("flex flex-col space-y-2 text-center sm:text-left",s),...t})};eK.displayName="SheetHeader";const eZ=e=>{let{className:s,...t}=e;return(0,r.jsx)("div",{className:o("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};eZ.displayName="SheetFooter";const eQ=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(eG.hE,{ref:s,className:o("text-lg font-semibold text-foreground",t),...a})});eQ.displayName=eG.hE.displayName;const e$=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(eG.VY,{ref:s,className:o("text-sm text-muted-foreground",t),...a})});e$.displayName=eG.VY.displayName;var e0=t(41888);const e2=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70");const e4=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(e0.b,{ref:s,className:o(e2(),t),...a})});e4.displayName=e0.b.displayName;const e1=eG.bL;const e5=eG.l9;const e3=eG.ZL;const e6=eG.bm;const e8=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(eG.hJ,{ref:s,className:o("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a})});e8.displayName=eG.hJ.displayName;const e9=i.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(e3,{children:[(0,r.jsx)(e8,{}),(0,r.jsxs)(eG.UC,{ref:s,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i,children:[a,(0,r.jsxs)(eG.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(eW.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});e9.displayName=eG.UC.displayName;const e7=e=>{let{className:s,...t}=e;return(0,r.jsx)("div",{className:o("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};e7.displayName="DialogHeader";const se=e=>{let{className:s,...t}=e;return(0,r.jsx)("div",{className:o("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};se.displayName="DialogFooter";const ss=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(eG.hE,{ref:s,className:o("text-lg font-semibold leading-none tracking-tight",t),...a})});ss.displayName=eG.hE.displayName;const st=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(eG.VY,{ref:s,className:o("text-sm text-muted-foreground",t),...a})});st.displayName=eG.VY.displayName;var sa=t(82488);var sr=t(6382);var si=t(14436);var sl=t.n(si);var sn=t(93884);const sc=sn.bL;const sd=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(sn.B8,{ref:s,className:o("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});sd.displayName=sn.B8.displayName;const so=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(sn.l9,{ref:s,className:o("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-background disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});so.displayName=sn.l9.displayName;const sm=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(sn.UC,{ref:s,className:o("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-background",t),...a})});sm.displayName=sn.UC.displayName;function sh(e){let{onImportComplete:s,itemId:t,onCancel:l,batchMode:n=false}=e;var c;const[d,o]=(0,i.useState)(null);const[m,u]=(0,i.useState)([]);const[p,f]=(0,i.useState)([]);const[g,j]=(0,i.useState)([]);const[v,y]=(0,i.useState)(false);const[N,w]=(0,i.useState)(null);const[S,A]=(0,i.useState)({});const[C,D]=(0,i.useState)([]);const[R,F]=(0,i.useState)({delimiter:",",hasHeader:true,skipEmptyLines:true,headerRowIndex:0});const[I,P]=(0,i.useState)("file");const[z,E]=(0,i.useState)(false);const[T,M]=(0,i.useState)("");const[O,L]=(0,i.useState)("");const{toast:H}=V();const W=[{key:"height",label:"Height"},{key:"width",label:"Width"},{key:"slopeRatio",label:"Slope Ratio"},{key:"pga",label:"PGA"},{key:"h1h2Ratio",label:"H1/(H1+H2) Ratio"},{key:"groundwater",label:"Groundwater"},{key:"relativeDensity",label:"Relative Density"},{key:"inclination",label:"Inclination"},{key:"value",label:"Settlement Value"}];const J=e=>{w(null);if(e.target.files&&e.target.files.length>0){const s=e.target.files[0];const t=["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/json"];if(!t.includes(s.type)&&!s.name.endsWith(".csv")&&!s.name.endsWith(".xlsx")&&!s.name.endsWith(".xls")&&!s.name.endsWith(".json")){w("Please select a CSV, Excel, or JSON file");return}o(s);B(s)}};const B=e=>{y(true);w(null);if(e.name.endsWith(".json")){const s=new FileReader;s.onload=e=>{try{var s;const t=JSON.parse((s=e.target)===null||s===void 0?void 0:s.result);if(Array.isArray(t)&&t.length>0){const e=t[0];const s=Object.keys(e);f(s);j(t.slice(0,10));const a=[s];t.slice(0,20).forEach(e=>{a.push(s.map(s=>{var t;return((t=e[s])===null||t===void 0?void 0:t.toString())||""}))});u(a);Z(s);P("mapping")}else{w("Invalid JSON format. Expected an array of objects.")}}catch(e){w("Failed to parse JSON file")}finally{y(false)}};s.onerror=()=>{w("Failed to read file");y(false)};s.readAsText(e)}else{sl().parse(e,{delimiter:R.delimiter,skipEmptyLines:R.skipEmptyLines,complete:e=>{if(e.errors.length>0){w("Error parsing file: ".concat(e.errors[0].message));y(false);return}const s=e.data;if(s.length===0){w("No data found in the file");y(false);return}u(s.slice(0,Math.min(s.length,20)));Y(s,R.headerRowIndex);y(false)},error:e=>{w("Error parsing file: ".concat(e.message));y(false)}})}};const Y=(e,s)=>{if(!e||e.length<=s){w("Selected header row is out of range");return}const t=e[s];f(t);const a=[];for(let r=s+1;r<Math.min(e.length,s+11);r++){const s=e[r];if(s){const e={};t.forEach((t,a)=>{if(t&&s[a]!==undefined){e[t]=s[a]}});a.push(e)}}j(a);Z(t)};const K=e=>{F({...R,headerRowIndex:e});Y(m,e)};const Z=e=>{const s={};W.forEach(t=>{let a=e.find(e=>e.toLowerCase()===t.key.toLowerCase()||e.toLowerCase()===t.label.toLowerCase());if(!a){a=e.find(e=>e.toLowerCase().includes(t.key.toLowerCase())||e.toLowerCase().includes(t.label.toLowerCase()))}if(a){s[t.key]=a}});A(s);const t=e.filter(e=>{if(g.length>0){const s=g[0][e];return!isNaN(Number.parseFloat(s))}return false});if(t.length>0){D([t[0]]);if(t.length>1){M(t[0]);L(t[1])}}};const Q=(e,s)=>{A(t=>({...t,[e]:s}))};const $=e=>{D(s=>{if(s.includes(e)){return s.filter(s=>s!==e)}else{if(s.length>=3){H({title:"Maximum 3 columns",description:"You can select up to 3 columns for analysis",variant:"destructive"});return s}return[...s,e]}})};const ee=()=>{if(!d){w("Please select a file to import");return}const e=W.filter(e=>!S[e.key]).map(e=>e.label);if(e.length>0){w("Please map the following required fields: ".concat(e.join(", ")));return}if(C.length===0){w("Please select at least one column for analysis");return}y(true);if(d.name.endsWith(".json")){const e=new FileReader;e.onload=e=>{try{var s;const t=JSON.parse((s=e.target)===null||s===void 0?void 0:s.result);et(t)}catch(e){w("Failed to parse JSON file");y(false)}};e.onerror=()=>{w("Failed to read file");y(false)};e.readAsText(d)}else{sl().parse(d,{delimiter:R.delimiter,skipEmptyLines:R.skipEmptyLines,complete:e=>{if(e.errors.length>0){w("Error parsing file: ".concat(e.errors[0].message));y(false);return}const s=e.data;if(s.length<=R.headerRowIndex){w("No data found after header row");y(false);return}const t=s[R.headerRowIndex];const a=[];for(let e=R.headerRowIndex+1;e<s.length;e++){const r=s[e];if(r&&r.length>0){const e={};t.forEach((s,t)=>{if(s&&r[t]!==undefined){e[s]=r[t]}});a.push(e)}}et(a)},error:e=>{w("Error parsing file: ".concat(e.message));y(false)}})}};const et=e=>{const a=e.map(e=>{const s={};Object.entries(S).forEach(t=>{let[a,r]=t;s[a]=e[r]});if(T&&e[T]!==undefined){s[T]=e[T]}if(O&&e[O]!==undefined){s[O]=e[O]}return s});const r=[...C];if(T&&!r.includes(T)){r.push(T)}if(O&&!r.includes(O)){r.push(O)}s(a,S,r,t);H({title:"Import Successful",description:"Successfully imported ".concat(a.length," rows of data")});y(false)};(0,i.useEffect)(()=>{if(m.length>R.headerRowIndex){Y(m,R.headerRowIndex)}},[R.headerRowIndex]);return(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)(sc,{value:I,onValueChange:P,className:"w-full",children:[(0,r.jsxs)(sd,{className:"grid w-full grid-cols-3 mb-4",children:[(0,r.jsx)(a.TabsItem,{value:"file",children:"File Selection"}),(0,r.jsx)(a.TabsItem,{value:"mapping",disabled:!d,children:"Column Mapping"}),(0,r.jsx)(a.TabsItem,{value:"analysis",disabled:!d,children:"Analysis Setup"})]}),(0,r.jsxs)(sm,{value:"file",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:n?"Batch Data Import":"Import Data for Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Upload a CSV, Excel, or JSON file and map columns to data fields"})]}),!d&&(0,r.jsxs)("div",{children:[(0,r.jsx)(en,{type:"file",accept:".csv,.xlsx,.xls,.json",onChange:J,className:"hidden",id:"file-upload"}),(0,r.jsx)("label",{htmlFor:"file-upload",children:(0,r.jsxs)(h,{as:"span",className:"cursor-pointer",children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Select File"]})})]})]}),N&&(0,r.jsxs)(U,{variant:"destructive",children:[(0,r.jsx)(G.A,{className:"h-4 w-4"}),(0,r.jsx)(q,{children:"Error"}),(0,r.jsx)(X,{children:N})]}),v&&!d&&(0,r.jsxs)("div",{className:"flex justify-center items-center py-8",children:[(0,r.jsx)(b.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,r.jsx)("p",{className:"ml-2",children:"Processing file..."})]}),d&&(0,r.jsx)(x,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(sa.A,{className:"h-5 w-5 mr-2 text-blue-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium",children:d.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[(d.size/1024).toFixed(2)," KB •"," ",m.length>0?"".concat(m.length," rows detected"):"Processing..."]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(h,{variant:"outline",size:"sm",onClick:()=>o(null),children:"Change File"}),(0,r.jsxs)(h,{size:"sm",onClick:()=>P("mapping"),disabled:m.length===0||v,children:["Next: Column Mapping",(0,r.jsx)(sx,{className:"ml-2 h-4 w-4"})]})]})]}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsxs)(h,{variant:"ghost",size:"sm",onClick:()=>E(!z),className:"text-sm text-gray-500",children:[z?(0,r.jsx)(ey.A,{className:"h-4 w-4 mr-1"}):(0,r.jsx)(ev.A,{className:"h-4 w-4 mr-1"}),z?"Hide Advanced Options":"Show Advanced Options"]})}),z&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-md bg-gray-50 dark:bg-gray-900",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(e4,{htmlFor:"delimiter",children:"CSV Delimiter"}),(0,r.jsxs)(eb,{value:R.delimiter,onValueChange:e=>F({...R,delimiter:e}),children:[(0,r.jsx)(ek,{id:"delimiter",children:(0,r.jsx)(ew,{placeholder:"Select delimiter"})}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(eR,{value:",",children:"Comma (,)"}),(0,r.jsx)(eR,{value:";",children:"Semicolon (;)"}),(0,r.jsx)(eR,{value:"\\t",children:"Tab"}),(0,r.jsx)(eR,{value:"|",children:"Pipe (|)"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(e4,{htmlFor:"skip-empty",children:"Skip Empty Lines"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(el,{id:"skip-empty",checked:R.skipEmptyLines,onCheckedChange:e=>F({...R,skipEmptyLines:!!e})}),(0,r.jsx)("label",{htmlFor:"skip-empty",className:"text-sm",children:"Skip empty lines when parsing"})]})]})]}),m.length>0&&(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("h4",{className:"font-medium flex items-center",children:[(0,r.jsx)(sr.A,{className:"h-4 w-4 mr-2 text-blue-500"}),"Data Preview"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(e4,{htmlFor:"header-row",className:"text-sm",children:"Header Row:"}),(0,r.jsxs)(eb,{value:R.headerRowIndex.toString(),onValueChange:e=>K(Number.parseInt(e)),children:[(0,r.jsx)(ek,{id:"header-row",className:"w-[80px]",children:(0,r.jsx)(ew,{placeholder:"Row"})}),(0,r.jsx)(eC,{children:m.slice(0,10).map((e,s)=>(0,r.jsxs)(eR,{value:s.toString(),children:["Row ",s+1]},s))})]})]})]}),(0,r.jsx)("div",{className:"overflow-x-auto border rounded-md",children:(0,r.jsxs)(ec,{children:[(0,r.jsx)(ed,{children:(0,r.jsxs)(eh,{className:"bg-blue-50 dark:bg-blue-900/20",children:[(0,r.jsx)(ex,{className:"w-[80px] font-bold",children:"Row"}),(c=m[0])===null||c===void 0?void 0:c.map((e,s)=>(0,r.jsxs)(ex,{className:R.headerRowIndex===0?"font-bold":"",children:["Column ",s+1]},s))]})}),(0,r.jsx)(eo,{children:m.slice(0,10).map((e,s)=>(0,r.jsxs)(eh,{className:s===R.headerRowIndex?"bg-blue-100 dark:bg-blue-800/30":"",children:[(0,r.jsx)(eu,{className:"font-medium",children:s===R.headerRowIndex?(0,r.jsx)(es,{variant:"outline",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"Header"}):"Row ".concat(s+1)}),e.map((e,s)=>(0,r.jsx)(eu,{className:"truncate max-w-[200px]",children:e},s))]},s))})]})}),(0,r.jsx)("div",{className:"mt-4 text-sm text-gray-500",children:(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Tip:"})," Select the row that contains your column headers. This will be used for mapping data in the next step."]})})]})]})}),!d&&(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-8 text-center",children:[(0,r.jsx)("div",{className:"mx-auto w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center mb-4",children:(0,r.jsx)(k.A,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Drag & Drop Your Data File"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Or click the button above to browse your files"}),(0,r.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-4",children:"Supported formats: CSV, Excel (.xlsx, .xls), JSON"})]})]}),(0,r.jsxs)(sm,{value:"mapping",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Column Mapping"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(h,{variant:"outline",size:"sm",onClick:()=>P("file"),children:[(0,r.jsx)(su,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,r.jsxs)(h,{size:"sm",onClick:()=>P("analysis"),children:["Next: Analysis Setup",(0,r.jsx)(sx,{className:"ml-2 h-4 w-4"})]})]})]}),(0,r.jsx)(x,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"border-b pb-4",children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Map Columns to Required Fields"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Match columns from your file to the required data fields"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:W.map(e=>(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)(e4,{htmlFor:"map-".concat(e.key),className:"flex items-center",children:[e.label,e.key==="value"&&(0,r.jsx)("span",{className:"ml-1 text-red-500",children:"*"})]}),(0,r.jsxs)(eb,{value:S[e.key]||"",onValueChange:s=>Q(e.key,s),children:[(0,r.jsx)(ek,{id:"map-".concat(e.key),className:"w-full",children:(0,r.jsx)(ew,{placeholder:"Select column"})}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(eR,{value:"",children:"-- Select column --"}),p.map(e=>(0,r.jsx)(eR,{value:e,children:e},e))]})]})]},e.key))}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Data Preview with Mappings"}),(0,r.jsx)("div",{className:"overflow-x-auto border rounded-md",children:(0,r.jsxs)(ec,{children:[(0,r.jsx)(ed,{children:(0,r.jsx)(eh,{children:W.map(e=>(0,r.jsxs)(ex,{children:[e.label,S[e.key]&&(0,r.jsx)("div",{className:"text-xs text-gray-500",children:S[e.key]})]},e.key))})}),(0,r.jsx)(eo,{children:g.slice(0,5).map((e,s)=>(0,r.jsx)(eh,{children:W.map(s=>(0,r.jsx)(eu,{className:"truncate max-w-[150px]",children:S[s.key]?e[S[s.key]]:"-"},s.key))},s))})]})})]})]})})]}),(0,r.jsxs)(sm,{value:"analysis",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Analysis Setup"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(h,{variant:"outline",size:"sm",onClick:()=>P("mapping"),children:[(0,r.jsx)(su,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,r.jsx)(h,{onClick:ee,disabled:v,children:v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.A,{className:"mr-2 h-4 w-4"}),"Complete Import"]})})]})]}),N&&(0,r.jsxs)(U,{variant:"destructive",children:[(0,r.jsx)(G.A,{className:"h-4 w-4"}),(0,r.jsx)(q,{children:"Error"}),(0,r.jsx)(X,{children:N})]}),(0,r.jsx)(x,{className:"p-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"border-b pb-4",children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Select Columns for Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Choose columns to use for analytical diagrams and visualizations (max 3)"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:p.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(el,{id:"analysis-".concat(e),checked:C.includes(e),onCheckedChange:()=>$(e)}),(0,r.jsx)(e4,{htmlFor:"analysis-".concat(e),className:"text-sm cursor-pointer truncate",children:e})]},e))}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h4",{className:"font-medium mb-4",children:"Set Default Axes for Visualizations"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(e4,{htmlFor:"x-axis",children:"X-Axis Column"}),(0,r.jsxs)(eb,{value:T,onValueChange:M,children:[(0,r.jsx)(ek,{id:"x-axis",children:(0,r.jsx)(ew,{placeholder:"Select X-Axis column"})}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(eR,{value:"",children:"-- None --"}),p.map(e=>(0,r.jsx)(eR,{value:e,children:e},"x-".concat(e)))]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(e4,{htmlFor:"y-axis",children:"Y-Axis Column"}),(0,r.jsxs)(eb,{value:O,onValueChange:L,children:[(0,r.jsx)(ek,{id:"y-axis",children:(0,r.jsx)(ew,{placeholder:"Select Y-Axis column"})}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(eR,{value:"",children:"-- None --"}),p.map(e=>(0,r.jsx)(eR,{value:e,children:e},"y-".concat(e)))]})]})]})]})]}),(0,r.jsxs)("div",{className:"border-t pt-4",children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Import Summary"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(sa.A,{className:"h-4 w-4 mr-2 text-blue-500"}),(0,r.jsx)("span",{className:"text-sm",children:d===null||d===void 0?void 0:d.name})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(sr.A,{className:"h-4 w-4 mr-2 text-green-500"}),(0,r.jsxs)("span",{className:"text-sm",children:[g.length," rows ready to import"]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(_.A,{className:"h-4 w-4 mr-2 text-amber-500"}),(0,r.jsxs)("span",{className:"text-sm",children:[Object.keys(S).length," of ",W.length," fields mapped"]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(sp,{className:"h-4 w-4 mr-2 text-purple-500"}),(0,r.jsxs)("span",{className:"text-sm",children:[C.length," columns selected for analysis",C.length>0&&(0,r.jsxs)("span",{className:"ml-1 text-gray-500",children:["(",C.join(", "),")"]})]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-2",children:[l&&(0,r.jsxs)(h,{variant:"outline",onClick:l,children:[(0,r.jsx)(eW.A,{className:"mr-2 h-4 w-4"}),"Cancel"]}),(0,r.jsx)(h,{onClick:ee,disabled:v,children:v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.A,{className:"mr-2 h-4 w-4"}),"Complete Import"]})})]})]})})]})]})})}function sx(e){return(0,r.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"m9 18 6-6-6-6"})})}function su(e){return(0,r.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,r.jsx)("path",{d:"m15 18-6-6 6-6"})})}function sp(e){return(0,r.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("line",{x1:"18",x2:"18",y1:"20",y2:"10"}),(0,r.jsx)("line",{x1:"12",x2:"12",y1:"20",y2:"4"}),(0,r.jsx)("line",{x1:"6",x2:"6",y1:"20",y2:"14"})]})};function sf(){const[e,s]=(0,i.useState)([]);const[t,a]=(0,i.useState)(true);const[l,n]=(0,i.useState)("");const[c,d]=(0,i.useState)([]);const[o,m]=(0,i.useState)(1);const[x,u]=(0,i.useState)(20);const[p,f]=(0,i.useState)({});const[g,j]=(0,i.useState)(0);const[y,b]=(0,i.useState)(0);const[N,A]=(0,i.useState)(null);const[C,D]=(0,i.useState)(false);const{toast:R}=V();const F=e=>{a(true);const t=e.children||[];const r=(e,s)=>{var a,r;const i=t.find(s=>s.id===e);if(!i)return[];const l=(a=i.children)===null||a===void 0?void 0:a.find(e=>e.id===s);if(!l)return[];return((r=l.children)===null||r===void 0?void 0:r.map(e=>e.name))||[]};const i=e=>{var s;const a=t.find(s=>s.id===e);if(!a)return[];return((s=a.children)===null||s===void 0?void 0:s.map(e=>e.name))||[]};const l=r("dike-size","height");const n=r("dike-size","width");const c=r("dike-size","slope-ratio");const o=r("earthquake","pga");const m=r("thickness-ratio","h1h2");const h=r("thickness-ratio","groundwater");const x=i("relative-density");const u=i("inclination");const p=[];let f=0;l.forEach(e=>{n.forEach(s=>{c.forEach(t=>{o.forEach(a=>{m.forEach(r=>{h.forEach(i=>{x.forEach(l=>{u.forEach(n=>{p.push({id:"item-".concat(f++),height:e,width:s,slopeRatio:t,pga:a,h1h2Ratio:r,groundwater:i,relativeDensity:l,inclination:n,selected:false,notes:"",imported:false})})})})})})})})});const g=I(e);console.log("Generated ".concat(p.length," combinations, expected ").concat(g));if(p.length!==g){console.warn("Warning: Generated combinations count doesn't match the expected total")}s(p);d(p);a(false)};const I=e=>{const s=e.children||[];const t=(e,t)=>{var a,r;const i=s.find(s=>s.id===e);if(!i)return[];const l=(a=i.children)===null||a===void 0?void 0:a.find(e=>e.id===t);if(!l)return[];return((r=l.children)===null||r===void 0?void 0:r.map(e=>e.name))||[]};const a=e=>{var t;const a=s.find(s=>s.id===e);if(!a)return[];return((t=a.children)===null||t===void 0?void 0:t.map(e=>e.name))||[]};const r=t("dike-size","height");const i=t("dike-size","width");const l=t("dike-size","slope-ratio");const n=t("earthquake","pga");const c=t("thickness-ratio","h1h2");const d=t("thickness-ratio","groundwater");const o=a("relative-density");const m=a("inclination");return r.length*i.length*l.length*n.length*c.length*d.length*o.length*m.length};(0,i.useEffect)(()=>{let s=[...e];if(l.trim()!==""){s=s.filter(e=>Object.values(e).some(e=>typeof e==="string"&&e.toLowerCase().includes(l.toLowerCase())))}Object.entries(p).forEach(e=>{let[t,a]=e;if(a&&a!=="all"){s=s.filter(e=>e[t]===a)}});if(p.importStatus){if(p.importStatus==="imported"){s=s.filter(e=>e.imported)}else if(p.importStatus==="not-imported"){s=s.filter(e=>!e.imported)}}d(s);m(1)},[l,p,e]);(0,i.useEffect)(()=>{j(e.filter(e=>e.selected).length);b(e.filter(e=>e.imported).length)},[e]);(0,i.useEffect)(()=>{const e=localStorage.getItem("checklist");if(e){try{const t=JSON.parse(e);s(t);d(t);a(false);return}catch(e){console.error("Failed to parse saved checklist")}}const t=localStorage.getItem("mindMapData");const r=t?JSON.parse(t):ea;F(r)},[]);const P=e=>{s(s=>s.map(s=>s.id===e?{...s,selected:!s.selected}:s))};const z=e=>{const t=U().map(e=>e.id);s(s=>s.map(s=>t.includes(s.id)?{...s,selected:e}:s))};const E=(e,t)=>{s(s=>s.map(s=>s.id===e?{...s,notes:t}:s))};const T=(e,t)=>{const a=Number.parseFloat(t);if(!isNaN(a)){s(s=>s.map(s=>s.id===e?{...s,value:a}:s))}};const M=e=>{A(e)};const O=()=>{if(g===0){R({title:"No Items Selected",description:"Please select at least one item to import data for.",variant:"destructive"});return}D(true)};const L=(t,a,r,i)=>{if(i){const e=t[0];if(!e){R({title:"Import Failed",description:"No data found in the imported file",variant:"destructive"});return}s(s=>s.map(s=>s.id===i?{...s,...e,imported:true,importSource:"Manual import (".concat(new Date().toLocaleString(),")"),importDate:new Date().toISOString(),analysisColumns:r}:s));A(null)}else{const a=e.filter(e=>e.selected);const i=[...e];a.forEach((e,s)=>{if(s<t.length){const a=t[s];const l=i.findIndex(s=>s.id===e.id);if(l!==-1){i[l]={...i[l],...a,imported:true,importSource:"Batch import (".concat(new Date().toLocaleString(),")"),importDate:new Date().toISOString(),analysisColumns:r}}}});s(i);D(false)}setTimeout(()=>{localStorage.setItem("checklist",JSON.stringify(e))},100)};const H=()=>{const s=["Height","Width","Slope Ratio","PGA","H1/(H1+H2)","Groundwater","Relative Density","Inclination","Selected","Imported","Value","Import Source","Import Date","Notes"];const t=[s.join(","),...e.map(e=>['"'.concat(e.height,'"'),'"'.concat(e.width,'"'),'"'.concat(e.slopeRatio,'"'),'"'.concat(e.pga,'"'),'"'.concat(e.h1h2Ratio,'"'),'"'.concat(e.groundwater,'"'),'"'.concat(e.relativeDensity,'"'),'"'.concat(e.inclination,'"'),e.selected?"Yes":"No",e.imported?"Yes":"No",e.value!==undefined?e.value:"",'"'.concat(e.importSource||"",'"'),'"'.concat(e.importDate||"",'"'),'"'.concat(e.notes,'"')].join(","))].join("\n");const a=new Blob([t],{type:"text/csv;charset=utf-8;"});const r=URL.createObjectURL(a);const i=document.createElement("a");i.setAttribute("href",r);i.setAttribute("download","dike_settlement_checklist.csv");i.style.visibility="hidden";document.body.appendChild(i);i.click();document.body.removeChild(i)};const G=()=>{const s=e.filter(e=>e.selected);const t=new Blob([JSON.stringify(s,null,2)],{type:"application/json"});const a=URL.createObjectURL(t);const r=document.createElement("a");r.setAttribute("href",a);r.setAttribute("download","selected_dike_data.json");r.style.visibility="hidden";document.body.appendChild(r);r.click();document.body.removeChild(r)};const W=()=>{const s=e.filter(e=>e.imported);localStorage.setItem("analysisData",JSON.stringify(s));R({title:"Data Prepared for Analysis",description:"".concat(s.length," imported items are now available for analysis in the Advanced Analytics tab.")})};const J=s=>{const t=new Set;e.forEach(e=>{if(typeof e[s]==="string"){t.add(e[s])}});return Array.from(t).sort()};const _=()=>{f({});n("")};const B=()=>{localStorage.setItem("checklist",JSON.stringify(e));R({title:"Checklist Saved",description:"Your checklist has been saved successfully."})};const Y=Math.ceil(c.length/x);const U=()=>{const e=(o-1)*x;return c.slice(e,e+x)};return(0,r.jsxs)("div",{className:"space-y-6",children:[e.length>5e3&&(0,r.jsx)("div",{className:"bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 rounded-md p-3 mb-4",children:(0,r.jsxs)("p",{className:"text-amber-800 dark:text-amber-300 text-sm",children:[(0,r.jsx)("strong",{children:"Note:"})," This checklist contains ",e.length.toLocaleString()," combinations. For better performance, use the filters to narrow down the results or export to CSV for external processing."]})}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Generated Checklist"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c.length," combinations (Total: ",e.length,") | ",g," selected |"," ",y," imported"]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)(h,{variant:"outline",size:"sm",onClick:()=>F(ea),children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Regenerate"]}),(0,r.jsxs)(eJ,{children:[(0,r.jsx)(e_,{asChild:true,children:(0,r.jsxs)(h,{variant:"outline",size:"sm",children:[(0,r.jsx)(ef.A,{className:"h-4 w-4 mr-2"}),"Filters"]})}),(0,r.jsxs)(eX,{children:[(0,r.jsxs)(eK,{children:[(0,r.jsx)(eQ,{children:"Filter Checklist"}),(0,r.jsx)(e$,{children:"Select values to filter the checklist by specific parameters"})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(e4,{htmlFor:"height-filter",children:"Height"}),(0,r.jsxs)(eb,{value:p.height||"all",onValueChange:e=>f({...p,height:e}),children:[(0,r.jsx)(ek,{id:"height-filter",children:(0,r.jsx)(ew,{placeholder:"All heights"})}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(eR,{value:"all",children:"All heights"}),J("height").map(e=>(0,r.jsx)(eR,{value:e,children:e},e))]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(e4,{htmlFor:"width-filter",children:"Width"}),(0,r.jsxs)(eb,{value:p.width||"all",onValueChange:e=>f({...p,width:e}),children:[(0,r.jsx)(ek,{id:"width-filter",children:(0,r.jsx)(ew,{placeholder:"All widths"})}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(eR,{value:"all",children:"All widths"}),J("width").map(e=>(0,r.jsx)(eR,{value:e,children:e},e))]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(e4,{htmlFor:"pga-filter",children:"PGA"}),(0,r.jsxs)(eb,{value:p.pga||"all",onValueChange:e=>f({...p,pga:e}),children:[(0,r.jsx)(ek,{id:"pga-filter",children:(0,r.jsx)(ew,{placeholder:"All PGA values"})}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(eR,{value:"all",children:"All PGA values"}),J("pga").map(e=>(0,r.jsx)(eR,{value:e,children:e},e))]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(e4,{htmlFor:"density-filter",children:"Relative Density"}),(0,r.jsxs)(eb,{value:p.relativeDensity||"all",onValueChange:e=>f({...p,relativeDensity:e}),children:[(0,r.jsx)(ek,{id:"density-filter",children:(0,r.jsx)(ew,{placeholder:"All density values"})}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(eR,{value:"all",children:"All density values"}),J("relativeDensity").map(e=>(0,r.jsx)(eR,{value:e,children:e},e))]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(e4,{htmlFor:"import-status-filter",children:"Import Status"}),(0,r.jsxs)(eb,{value:p.importStatus||"all",onValueChange:e=>f({...p,importStatus:e}),children:[(0,r.jsx)(ek,{id:"import-status-filter",children:(0,r.jsx)(ew,{placeholder:"All items"})}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(eR,{value:"all",children:"All items"}),(0,r.jsx)(eR,{value:"imported",children:"Imported only"}),(0,r.jsx)(eR,{value:"not-imported",children:"Not imported"})]})]})]}),(0,r.jsx)(h,{onClick:_,variant:"outline",children:"Reset All Filters"})]})]})]}),(0,r.jsxs)(h,{variant:"outline",size:"sm",onClick:B,children:[(0,r.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Save Checklist"]}),(0,r.jsxs)(h,{variant:"outline",size:"sm",onClick:H,children:[(0,r.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),(0,r.jsxs)(h,{variant:"outline",size:"sm",onClick:G,disabled:g===0,children:[(0,r.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Export Selected"]}),(0,r.jsxs)(h,{variant:"outline",size:"sm",onClick:O,disabled:g===0,children:[(0,r.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Batch Import"]}),(0,r.jsxs)(h,{variant:"default",size:"sm",onClick:W,disabled:y===0,children:[(0,r.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"Analyze Imported"]})]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(eg.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,r.jsx)(en,{placeholder:"Search checklist...",className:"pl-10",value:l,onChange:e=>n(e.target.value)})]}),(0,r.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(ec,{children:[(0,r.jsx)(ed,{children:(0,r.jsxs)(eh,{children:[(0,r.jsx)(ex,{className:"w-[50px]",children:(0,r.jsx)(el,{checked:U().length>0&&U().every(e=>e.selected),onCheckedChange:e=>z(!!e)})}),(0,r.jsx)(ex,{children:"Height"}),(0,r.jsx)(ex,{children:"Width"}),(0,r.jsx)(ex,{children:"Slope Ratio"}),(0,r.jsx)(ex,{children:"PGA"}),(0,r.jsx)(ex,{children:"H1/(H1+H2)"}),(0,r.jsx)(ex,{children:"Groundwater"}),(0,r.jsx)(ex,{children:"Relative Density"}),(0,r.jsx)(ex,{children:"Inclination"}),(0,r.jsx)(ex,{className:"w-[100px]",children:"Value"}),(0,r.jsx)(ex,{className:"w-[120px]",children:"Import Status"}),(0,r.jsx)(ex,{className:"w-[150px]",children:"Notes"})]})}),(0,r.jsx)(eo,{children:t?(0,r.jsx)(eh,{children:(0,r.jsxs)(eu,{colSpan:12,className:"text-center py-8",children:[(0,r.jsx)(w.A,{className:"h-6 w-6 animate-spin mx-auto"}),(0,r.jsx)("p",{className:"mt-2",children:"Processing data..."}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"This may take a moment due to the large number of combinations."})]})}):c.length===0?(0,r.jsx)(eh,{children:(0,r.jsx)(eu,{colSpan:12,className:"text-center py-8",children:(0,r.jsx)("p",{children:"No checklist items found matching your search or filters."})})}):U().map(e=>(0,r.jsxs)(eh,{className:e.imported?"bg-green-50 dark:bg-green-900/10":"",children:[(0,r.jsx)(eu,{children:(0,r.jsx)(el,{checked:e.selected,onCheckedChange:()=>P(e.id)})}),(0,r.jsx)(eu,{children:e.height}),(0,r.jsx)(eu,{children:e.width}),(0,r.jsx)(eu,{children:e.slopeRatio}),(0,r.jsx)(eu,{children:e.pga}),(0,r.jsx)(eu,{children:e.h1h2Ratio}),(0,r.jsx)(eu,{children:e.groundwater}),(0,r.jsx)(eu,{children:e.relativeDensity}),(0,r.jsx)(eu,{children:e.inclination}),(0,r.jsx)(eu,{children:(0,r.jsx)(en,{type:"number",placeholder:"Value",value:e.value!==undefined?e.value:"",onChange:s=>T(e.id,s.target.value),className:"h-8 w-full"})}),(0,r.jsx)(eu,{children:e.imported?(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(es,{variant:"success",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",children:"Imported"}),e.analysisColumns&&e.analysisColumns.length>0&&(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.analysisColumns.length," columns for analysis"]})]}):(0,r.jsxs)(h,{variant:"outline",size:"sm",className:"h-7 px-2",onClick:()=>M(e.id),children:[(0,r.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"Import"]})}),(0,r.jsx)(eu,{children:(0,r.jsx)(en,{placeholder:"Notes",value:e.notes,onChange:s=>E(e.id,s.target.value),className:"h-8 w-full"})})]},e.id))})]})})}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(e4,{htmlFor:"items-per-page",children:"Items per page:"}),(0,r.jsxs)(eb,{value:x.toString(),onValueChange:e=>{u(Number.parseInt(e));m(1)},children:[(0,r.jsx)(ek,{id:"items-per-page",className:"w-[80px]",children:(0,r.jsx)(ew,{placeholder:x.toString()})}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(eR,{value:"20",children:"20"}),(0,r.jsx)(eR,{value:"50",children:"50"}),(0,r.jsx)(eR,{value:"100",children:"100"}),(0,r.jsx)(eR,{value:"200",children:"200"}),(0,r.jsx)(eR,{value:"500",children:"500"})]})]})]}),(0,r.jsx)(eE,{children:(0,r.jsxs)(eT,{children:[(0,r.jsx)(eM,{children:(0,r.jsx)(eL,{onClick:()=>m(e=>Math.max(e-1,1)),className:o===1?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:Math.min(5,Y)},(e,s)=>{let t;if(Y<=5){t=s+1}else if(o<=3){t=s+1}else if(o>=Y-2){t=Y-4+s}else{t=o-2+s}return(0,r.jsx)(eM,{children:(0,r.jsx)(eO,{isActive:o===t,onClick:()=>m(t),children:t})},s)}),(0,r.jsx)(eM,{children:(0,r.jsx)(eV,{onClick:()=>m(e=>Math.min(e+1,Y)),className:o===Y?"pointer-events-none opacity-50":"cursor-pointer"})})]})}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Page ",o," of ",Y]})]}),(0,r.jsx)(e1,{open:N!==null,onOpenChange:e=>!e&&A(null),children:(0,r.jsxs)(e9,{className:"max-w-4xl",children:[(0,r.jsx)(ss,{children:"Import Data for Item"}),N&&(0,r.jsx)(sh,{onImportComplete:L,itemId:N,onCancel:()=>A(null)})]})}),(0,r.jsx)(e1,{open:C,onOpenChange:D,children:(0,r.jsxs)(e9,{className:"max-w-4xl",children:[(0,r.jsx)(ss,{children:"Batch Import Data"}),(0,r.jsx)(sh,{onImportComplete:L,onCancel:()=>D(false),batchMode:true})]})})]})}var sg=t(24744);var sj=t(8621);var sv=t(86686);var sy=t(6893);var sb=t(43842);var sN=t(12654);var sw=t(42321);var sk=t(94377);var sS=t(54820);var sA=t(87442);var sC=t(83499);var sD=t(28100);var sR=t(44911);var sF=t(77080);var sI=t(57014);const sP=["#3b82f6","#f87171","#4ade80","#facc15","#a855f7","#ec4899","#f97316","#06b6d4"];function sz(e){let{data:s,categories:t,index:a,colors:i=sP,showLegend:l=true,showTooltip:n=true,showXAxis:c=true,showYAxis:d=true,showGridLines:o=true,yAxisWidth:m=50}=e;return(0,r.jsx)(sg.u,{width:"100%",height:"100%",children:(0,r.jsxs)(sj.E,{data:s.flatMap(e=>e.data),margin:{top:10,right:10,left:10,bottom:20},children:[o&&(0,r.jsx)(sv.d,{strokeDasharray:"3 3"}),c&&(0,r.jsx)(sy.W,{dataKey:a}),d&&(0,r.jsx)(sb.h,{width:m}),n&&(0,r.jsx)(sN.m,{}),l&&(0,r.jsx)(sw.s,{}),s.map((e,s)=>(0,r.jsx)(sk.y,{dataKey:"y",name:e.name,fill:i[s%i.length]},e.name))]})})}function sE(e){let{data:s,categories:t,index:a,colors:i=sP,showLegend:l=true,showTooltip:n=true,showXAxis:c=true,showYAxis:d=true,showGridLines:o=true,yAxisWidth:m=50}=e;return(0,r.jsx)(sg.u,{width:"100%",height:"100%",children:(0,r.jsxs)(sS.b,{data:s.flatMap(e=>e.data),margin:{top:10,right:10,left:10,bottom:20},children:[o&&(0,r.jsx)(sv.d,{strokeDasharray:"3 3"}),c&&(0,r.jsx)(sy.W,{dataKey:a}),d&&(0,r.jsx)(sb.h,{width:m}),n&&(0,r.jsx)(sN.m,{}),l&&(0,r.jsx)(sw.s,{}),s.map((e,s)=>(0,r.jsx)(sA.N,{type:"monotone",dataKey:"y",name:e.name,stroke:i[s%i.length],activeDot:{r:8}},e.name))]})})}function sT(e){let{data:s,colors:t=sP,showLegend:a=true,showTooltip:i=true}=e;return(0,r.jsx)(sg.u,{width:"100%",height:"100%",children:(0,r.jsxs)(sC.r,{children:[(0,r.jsx)(sD.F,{data:s,cx:"50%",cy:"50%",labelLine:false,label:e=>{let{name:s,percent:t}=e;return"".concat(s,": ").concat((t*100).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:s.map((e,s)=>(0,r.jsx)(sR.f,{fill:t[s%t.length]},"cell-".concat(s)))}),i&&(0,r.jsx)(sN.m,{}),a&&(0,r.jsx)(sw.s,{})]})})}function sM(e){let{data:s,colors:t=sP,showLegend:a=true,showTooltip:i=true,showXAxis:l=true,showYAxis:n=true,showGridLines:c=true,yAxisWidth:d=50}=e;return(0,r.jsx)(sg.u,{width:"100%",height:"100%",children:(0,r.jsxs)(sF.t,{margin:{top:10,right:10,left:10,bottom:20},children:[c&&(0,r.jsx)(sv.d,{strokeDasharray:"3 3"}),l&&(0,r.jsx)(sy.W,{dataKey:"x",type:"number"}),n&&(0,r.jsx)(sb.h,{dataKey:"y",type:"number",width:d}),i&&(0,r.jsx)(sN.m,{cursor:{strokeDasharray:"3 3"}}),a&&(0,r.jsx)(sw.s,{}),s.map((e,s)=>(0,r.jsx)(sI.X,{name:e.name,data:e.data,fill:t[s%t.length]},e.name))]})})}var sO=t(51063);var sL=t(33067);var sV=t(9365);function sH(){var e,s,t,a,l,n;const[c,d]=(0,i.useState)([]);const[o,m]=(0,i.useState)(false);const[u,p]=(0,i.useState)("");const[f,g]=(0,i.useState)("");const[j,y]=(0,i.useState)("");const[w,k]=(0,i.useState)("");const[S,A]=(0,i.useState)("");const[C,D]=(0,i.useState)("");const[R,F]=(0,i.useState)("");const[I,P]=(0,i.useState)("");const[z,E]=(0,i.useState)("");const[T,M]=(0,i.useState)("bar");const[O,L]=(0,i.useState)("height");const[H,G]=(0,i.useState)("pga");const{toast:W}=V();const J=(e,s)=>{var t;const a=ea;const r=(t=a.children)===null||t===void 0?void 0:t.find(s=>s.id===e);if(!r)return[];if(s){var i,l;const e=(i=r.children)===null||i===void 0?void 0:i.find(e=>e.id===s);return(e===null||e===void 0?void 0:(l=e.children)===null||l===void 0?void 0:l.map(e=>e.name))||[]}else{var n;return((n=r.children)===null||n===void 0?void 0:n.map(e=>e.name))||[]}};const _=J("dike-size","height");const B=J("dike-size","width");const Y=J("dike-size","slope-ratio");const U=J("earthquake","pga");const q=J("thickness-ratio","h1h2");const X=J("thickness-ratio","groundwater");const K=((t=ea.children)===null||t===void 0?void 0:(s=t.find(e=>e.id==="relative-density"))===null||s===void 0?void 0:(e=s.children)===null||e===void 0?void 0:e.map(e=>e.name))||[];const Z=((n=ea.children)===null||n===void 0?void 0:(l=n.find(e=>e.id==="inclination"))===null||l===void 0?void 0:(a=l.children)===null||a===void 0?void 0:a.map(e=>e.name))||[];const Q=()=>{if(!u||!f||!j||!w||!S||!C||!R||!I||!z||isNaN(Number.parseFloat(z))){W({title:"Invalid Input",description:"Please fill in all fields with valid values.",variant:"destructive"});return}const e={id:"dp-".concat(Date.now()),height:u,width:f,slopeRatio:j,pga:w,h1h2Ratio:S,groundwater:C,relativeDensity:R,inclination:I,value:Number.parseFloat(z),timestamp:new Date().toISOString()};d(s=>[...s,e]);E("");W({title:"Data Point Added",description:"Added value ".concat(z," for the selected parameters")})};const $=()=>{m(true);setTimeout(()=>{m(false);localStorage.setItem("dikeDataPoints",JSON.stringify(c));W({title:"Data Saved",description:"Successfully saved ".concat(c.length," data points.")})},1e3)};const ee=()=>{const e=localStorage.getItem("checklist");if(!e){W({title:"No Checklist Found",description:"There is no saved checklist data to import.",variant:"destructive"});return}try{const s=JSON.parse(e);const t=s.filter(e=>e.selected&&e.value!==undefined);if(t.length===0){W({title:"No Valid Data",description:"No selected items with values found in the checklist.",variant:"destructive"});return}if(t.length>500){W({title:"Large Dataset",description:"You're importing ".concat(t.length," items. This may take a moment.")})}const a=t.map(e=>({id:"dp-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),height:e.height,width:e.width,slopeRatio:e.slopeRatio,pga:e.pga,h1h2Ratio:e.h1h2Ratio,groundwater:e.groundwater,relativeDensity:e.relativeDensity,inclination:e.inclination,value:e.value,timestamp:new Date().toISOString()}));d(e=>[...e,...a]);W({title:"Data Imported",description:"Successfully imported ".concat(a.length," data points from checklist.")})}catch(e){W({title:"Import Failed",description:"Failed to parse checklist data.",variant:"destructive"})}};(0,i.useEffect)(()=>{const e=localStorage.getItem("dikeDataPoints");if(e){try{d(JSON.parse(e))}catch(e){console.error("Failed to parse saved data points")}}},[]);const es=()=>{if(c.length===0)return{series:[],categories:[]};const e={};c.forEach(s=>{const t=s[H];const a=s[O];if(!e[t]){e[t]={}}if(!e[t][a]){e[t][a]=[]}e[t][a].push(s.value)});const s=Object.entries(e).map(e=>{let[s,t]=e;return{name:s,data:Object.entries(t).map(e=>{let[s,t]=e;return{x:s,y:t.reduce((e,s)=>e+s,0)/t.length}})}});const t=Array.from(new Set(c.map(e=>e[O]))).sort();return{series:s,categories:t}};const{series:et,categories:er}=es();const ei=()=>{if(c.length===0)return[];const e={};c.forEach(s=>{const t=s[O];if(!e[t]){e[t]=0}e[t]+=s.value});return Object.entries(e).map(e=>{let[s,t]=e;return{name:s,value:t}})};const el=ei();return(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)(sc,{defaultValue:"input",className:"w-full",children:[(0,r.jsxs)(sd,{className:"grid w-full grid-cols-2 mb-4",children:[(0,r.jsx)(so,{value:"input",children:"Data Input"}),(0,r.jsx)(so,{value:"visualization",children:"Data Visualization"})]}),(0,r.jsx)(sm,{value:"input",className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)(x,{className:"p-4",children:[(0,r.jsx)("h3",{className:"font-medium mb-4",children:"Add Data Point"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"height",children:"Height"}),(0,r.jsxs)(eb,{value:u,onValueChange:p,children:[(0,r.jsx)(ek,{id:"height",children:(0,r.jsx)(ew,{placeholder:"Select height"})}),(0,r.jsx)(eC,{children:_.map(e=>(0,r.jsx)(eR,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"width",children:"Width"}),(0,r.jsxs)(eb,{value:f,onValueChange:g,children:[(0,r.jsx)(ek,{id:"width",children:(0,r.jsx)(ew,{placeholder:"Select width"})}),(0,r.jsx)(eC,{children:B.map(e=>(0,r.jsx)(eR,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"slope-ratio",children:"Slope Ratio"}),(0,r.jsxs)(eb,{value:j,onValueChange:y,children:[(0,r.jsx)(ek,{id:"slope-ratio",children:(0,r.jsx)(ew,{placeholder:"Select slope ratio"})}),(0,r.jsx)(eC,{children:Y.map(e=>(0,r.jsx)(eR,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"pga",children:"PGA"}),(0,r.jsxs)(eb,{value:w,onValueChange:k,children:[(0,r.jsx)(ek,{id:"pga",children:(0,r.jsx)(ew,{placeholder:"Select PGA"})}),(0,r.jsx)(eC,{children:U.map(e=>(0,r.jsx)(eR,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"h1h2-ratio",children:"H1/(H1+H2) Ratio"}),(0,r.jsxs)(eb,{value:S,onValueChange:A,children:[(0,r.jsx)(ek,{id:"h1h2-ratio",children:(0,r.jsx)(ew,{placeholder:"Select ratio"})}),(0,r.jsx)(eC,{children:q.map(e=>(0,r.jsx)(eR,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"groundwater",children:"Groundwater"}),(0,r.jsxs)(eb,{value:C,onValueChange:D,children:[(0,r.jsx)(ek,{id:"groundwater",children:(0,r.jsx)(ew,{placeholder:"Select groundwater"})}),(0,r.jsx)(eC,{children:X.map(e=>(0,r.jsx)(eR,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"relative-density",children:"Relative Density"}),(0,r.jsxs)(eb,{value:R,onValueChange:F,children:[(0,r.jsx)(ek,{id:"relative-density",children:(0,r.jsx)(ew,{placeholder:"Select density"})}),(0,r.jsx)(eC,{children:K.map(e=>(0,r.jsx)(eR,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"inclination",children:"Inclination"}),(0,r.jsxs)(eb,{value:I,onValueChange:P,children:[(0,r.jsx)(ek,{id:"inclination",children:(0,r.jsx)(ew,{placeholder:"Select inclination"})}),(0,r.jsx)(eC,{children:Z.map(e=>(0,r.jsx)(eR,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsx)(e4,{htmlFor:"value",children:"Settlement Value"}),(0,r.jsx)(en,{id:"value",type:"number",placeholder:"Enter numerical value",value:z,onChange:e=>E(e.target.value)})]}),(0,r.jsxs)("div",{className:"col-span-2 flex justify-between",children:[(0,r.jsx)(h,{onClick:Q,children:"Add Data Point"}),(0,r.jsxs)("div",{className:"space-x-2",children:[(0,r.jsxs)(h,{variant:"outline",onClick:ee,children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Import from Checklist"]}),(0,r.jsx)(h,{variant:"outline",onClick:$,disabled:o||c.length===0,children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Save All Data"]})})]})]})]})]}),(0,r.jsxs)(x,{className:"p-4",children:[(0,r.jsxs)("h3",{className:"font-medium mb-4",children:["Data Points (",c.length,")"]}),(0,r.jsx)("div",{className:"h-[400px] overflow-y-auto border rounded",children:c.length===0?(0,r.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No data points added yet"}):(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Height"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Width"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"PGA"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Density"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Value"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800",children:c.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-2 py-2 text-sm",children:e.height}),(0,r.jsx)("td",{className:"px-2 py-2 text-sm",children:e.width}),(0,r.jsx)("td",{className:"px-2 py-2 text-sm",children:e.pga}),(0,r.jsx)("td",{className:"px-2 py-2 text-sm",children:e.relativeDensity}),(0,r.jsx)("td",{className:"px-2 py-2 text-sm",children:e.value})]},e.id))})]})})]})]})}),(0,r.jsx)(sm,{value:"visualization",className:"space-y-6",children:(0,r.jsxs)(x,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"font-medium",children:"Data Visualization"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(h,{variant:T==="bar"?"default":"outline",size:"sm",onClick:()=>M("bar"),children:[(0,r.jsx)(sO.A,{className:"h-4 w-4 mr-2"}),"Bar"]}),(0,r.jsxs)(h,{variant:T==="line"?"default":"outline",size:"sm",onClick:()=>M("line"),children:[(0,r.jsx)(sL.A,{className:"h-4 w-4 mr-2"}),"Line"]}),(0,r.jsxs)(h,{variant:T==="pie"?"default":"outline",size:"sm",onClick:()=>M("pie"),children:[(0,r.jsx)(sV.A,{className:"h-4 w-4 mr-2"}),"Pie"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"x-axis",children:"X-Axis Parameter"}),(0,r.jsxs)(eb,{value:O,onValueChange:e=>L(e),children:[(0,r.jsx)(ek,{id:"x-axis",children:(0,r.jsx)(ew,{placeholder:"Select X-Axis"})}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(eR,{value:"height",children:"Height"}),(0,r.jsx)(eR,{value:"width",children:"Width"}),(0,r.jsx)(eR,{value:"slopeRatio",children:"Slope Ratio"}),(0,r.jsx)(eR,{value:"pga",children:"PGA"}),(0,r.jsx)(eR,{value:"h1h2Ratio",children:"H1/(H1+H2) Ratio"}),(0,r.jsx)(eR,{value:"groundwater",children:"Groundwater"}),(0,r.jsx)(eR,{value:"relativeDensity",children:"Relative Density"}),(0,r.jsx)(eR,{value:"inclination",children:"Inclination"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"group-by",children:"Group By"}),(0,r.jsxs)(eb,{value:H,onValueChange:e=>G(e),children:[(0,r.jsx)(ek,{id:"group-by",children:(0,r.jsx)(ew,{placeholder:"Select Group By"})}),(0,r.jsxs)(eC,{children:[(0,r.jsx)(eR,{value:"height",children:"Height"}),(0,r.jsx)(eR,{value:"width",children:"Width"}),(0,r.jsx)(eR,{value:"slopeRatio",children:"Slope Ratio"}),(0,r.jsx)(eR,{value:"pga",children:"PGA"}),(0,r.jsx)(eR,{value:"h1h2Ratio",children:"H1/(H1+H2) Ratio"}),(0,r.jsx)(eR,{value:"groundwater",children:"Groundwater"}),(0,r.jsx)(eR,{value:"relativeDensity",children:"Relative Density"}),(0,r.jsx)(eR,{value:"inclination",children:"Inclination"})]})]})]})]}),(0,r.jsx)("div",{className:"h-[400px]",children:c.length===0?(0,r.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Add data points to generate visualizations"}):T==="bar"?(0,r.jsx)(sz,{data:et,categories:er,index:"x",yAxisWidth:40,showLegend:true,showXAxis:true,showYAxis:true,showGridLines:true,showTooltip:true}):T==="line"?(0,r.jsx)(sE,{data:et,categories:er,index:"x",yAxisWidth:40,showLegend:true,showXAxis:true,showYAxis:true,showGridLines:true,showTooltip:true}):(0,r.jsx)(sT,{data:el,showLegend:true,showTooltip:true})})]})})]})})}var sG=t(22957);const sW=i.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsxs)(sG.bL,{ref:s,className:o("relative flex w-full touch-none select-none items-center",t),...a,children:[(0,r.jsx)(sG.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(sG.Q6,{className:"absolute h-full bg-primary"})}),(0,r.jsx)(sG.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});sW.displayName=sG.bL.displayName;var sJ=t(43345);var s_=t(77680);var sB=t(4999);var sY=t(19032);function sU(){const[e,s]=(0,i.useState)([]);const[t,a]=(0,i.useState)(false);const[l,n]=(0,i.useState)("height");const[c,d]=(0,i.useState)("pga");const[o,m]=(0,i.useState)("value");const[u,p]=(0,i.useState)("relativeDensity");const[f,g]=(0,i.useState)("width");const[j,v]=(0,i.useState)([]);const[y,N]=(0,i.useState)(.5);const[A,C]=(0,i.useState)(true);const[D,R]=(0,i.useState)(5);const[F,I]=(0,i.useState)(true);const[P,z]=(0,i.useState)(false);const[E,T]=(0,i.useState)([]);const[M,O]=(0,i.useState)([]);const[L,H]=(0,i.useState)(false);const W=(0,i.useRef)(null);const J=(0,i.useRef)(null);const _=(0,i.useRef)(null);const B=(0,i.useRef)(null);const Y=(0,i.useRef)(null);const K=(0,i.useRef)(null);const{toast:Z}=V();(0,i.useEffect)(()=>{const e=localStorage.getItem("analysisData");if(e){try{const s=JSON.parse(e);if(s.length>0){Q(s);z(false);return}}catch(e){console.error("Failed to parse analysis data")}}const s=localStorage.getItem("checklist");if(s){try{const e=JSON.parse(s);const t=e.filter(e=>e.imported);if(t.length>0){Q(t);z(false)}else{const s=e.filter(e=>e.value!==undefined);if(s.length>0){Q(s);I(false);z(true)}else{z(true)}}}catch(e){console.error("Failed to parse checklist data");z(true)}}else{z(true)}},[]);const Q=e=>{const t=new Set;e.forEach(e=>{Object.keys(e).forEach(e=>{if(!e.startsWith("_")&&e!=="id"&&e!=="selected"&&e!=="notes"&&e!=="imported"&&e!=="importSource"&&e!=="importDate"&&e!=="timestamp"&&e!=="analysisColumns"){t.add(e)}});if(e.analysisColumns&&Array.isArray(e.analysisColumns)){e.analysisColumns.forEach(e=>t.add(e))}});const a=["height","width","slopeRatio","pga","h1h2Ratio","groundwater","relativeDensity","inclination","value"];const r=Array.from(t).filter(e=>!a.includes(e));T([...a,...r]);O(r);s(e);if(r.length>0){if(r.length>=1)n(r[0]);if(r.length>=2)d(r[1]);if(r.length>=3)m(r[2])}$(e)};const $=e=>{if(e.length<2)return;const s=Math.min(e.length,1e3);const t=e.length>s?e.sort(()=>.5-Math.random()).slice(0,s):e;const a=[];const r=t[0];Object.entries(r).forEach(e=>{let[s,t]=e;if(s==="id"||s==="selected"||s==="notes"||s==="imported"||s==="importSource"||s==="importDate"||s==="timestamp"||s==="analysisColumns"){return}const i=ei(r,s);if(!isNaN(i)){a.push(s)}});const i=[];const l=o==="value"?"value":o;a.forEach(e=>{if(e===l)return;const s=t.map(s=>ei(s,e));const a=t.map(e=>ei(e,l));const r=s.map((e,s)=>[e,a[s]]).filter(e=>{let[s,t]=e;return!isNaN(s)&&!isNaN(t)});if(r.length<2)return;const n=r.map(e=>e[0]);const c=r.map(e=>e[1]);const d=ee(n,c);i.push({parameter:e,correlation:d})});i.sort((e,s)=>Math.abs(s.correlation)-Math.abs(e.correlation));v(i)};const ee=(e,s)=>{const t=e.length;if(t!==s.length||t===0)return 0;const a=e.reduce((e,s)=>e+s,0)/t;const r=s.reduce((e,s)=>e+s,0)/t;let i=0;let l=0;let n=0;for(let c=0;c<t;c++){const t=e[c]-a;const d=s[c]-r;i+=t*d;l+=t*t;n+=d*d}if(l===0||n===0)return 0;return i/(Math.sqrt(l)*Math.sqrt(n))};(0,i.useEffect)(()=>{if(!W.current||e.length===0)return;if(J.current){W.current.removeChild(J.current.domElement);J.current.dispose()}const s=new s_.Z58;s.background=new s_.Q1f(0xf0f0f0);_.current=s;const t=new s_.ubm(75,W.current.clientWidth/W.current.clientHeight,.1,1e3);t.position.z=5;B.current=t;const a=new sB.JeP({antialias:true});a.setSize(W.current.clientWidth,W.current.clientHeight);W.current.appendChild(a.domElement);J.current=a;const r=new sY.N(t,a.domElement);r.enableDamping=true;r.dampingFactor=.05;r.autoRotate=A;r.autoRotateSpeed=y*5;Y.current=r;const i=new s_.IzY(3);s.add(i);es();const l=()=>{requestAnimationFrame(l);r.update();a.render(s,t)};l();const n=()=>{if(!W.current||!t||!a)return;t.aspect=W.current.clientWidth/W.current.clientHeight;t.updateProjectionMatrix();a.setSize(W.current.clientWidth/W.current.clientHeight)};window.addEventListener("resize",n);return()=>{window.removeEventListener("resize",n)}},[e.length,A,y]);(0,i.useEffect)(()=>{if(e.length>0){es()}},[l,c,o,u,f,D,e]);const es=()=>{if(!_.current||e.length===0)return;if(K.current){_.current.remove(K.current)}const s=e.map(e=>ei(e,l));const t=e.map(e=>ei(e,c));const a=e.map(e=>ei(e,o));const r=e.map(e=>ei(e,u));const i=e.map(e=>ei(e,f));const n=e=>{const s=Math.min(...e);const t=Math.max(...e);const a=t-s;return a===0?e.map(()=>.5):e.map(e=>(e-s)/a)};const d=n(s);const m=n(t);const h=n(a);const x=n(r);const p=n(i);const g=d.map(e=>(e-.5)*4);const j=m.map(e=>(e-.5)*4);const v=h.map(e=>(e-.5)*4);const y=new s_.LoY;const b=new Float32Array(e.length*3);const N=new Float32Array(e.length*3);const w=new Float32Array(e.length);for(let s=0;s<e.length;s++){b[s*3]=g[s];b[s*3+1]=j[s];b[s*3+2]=v[s];N[s*3]=x[s];N[s*3+1]=.2;N[s*3+2]=1-x[s];w[s]=D*(.5+p[s])}y.setAttribute("position",new s_.THS(b,3));y.setAttribute("color",new s_.THS(N,3));y.setAttribute("size",new s_.THS(w,1));const k=new s_.BH$({size:D/10,vertexColors:true,sizeAttenuation:true});const S=new s_.ONl(y,k);_.current.add(S);K.current=S;et()};const et=()=>{if(!_.current)return;_.current.children=_.current.children.filter(e=>!(e.userData&&e.userData.isLabel));const e=new s_.IzY(3);_.current.add(e);const s=(e,s)=>{const t=document.createElement("canvas");const a=t.getContext("2d");if(!a)return;t.width=256;t.height=64;a.fillStyle="#ffffff";a.fillRect(0,0,t.width,t.height);a.font="24px Arial";a.fillStyle="#000000";a.textAlign="center";a.textBaseline="middle";a.fillText(e,t.width/2,t.height/2);const r=new s_.gPd(t);r.needsUpdate=true;const i=new s_.RoJ({map:r});const l=new s_.kxk(i);l.position.copy(s);l.scale.set(1,.25,1);l.userData={isLabel:true};return l};const t=s(l,new s_.Pq0(3.5,0,0));const a=s(c,new s_.Pq0(0,3.5,0));const r=s(o,new s_.Pq0(0,0,3.5));if(t)_.current.add(t);if(a)_.current.add(a);if(r)_.current.add(r)};const ea=()=>{if(!J.current||!_.current||!B.current)return;J.current.render(_.current,B.current);const e=J.current.domElement.toDataURL("image/png");const s=document.createElement("a");s.href=e;s.download="3d_visualization.png";s.click();Z({title:"Visualization Exported",description:"The 3D visualization has been exported as an image."})};const er=()=>{a(true);const e=localStorage.getItem("checklist");if(e){try{const s=JSON.parse(e);let t;if(F){t=s.filter(e=>e.imported);if(t.length===0){Z({title:"No Imported Data",description:"No imported data found in the checklist. Try toggling 'Show Only Imported Data' off.",variant:"destructive"});z(true);t=s.filter(e=>e.value!==undefined)}else{z(false)}}else{t=s.filter(e=>e.value!==undefined)}if(t.length>0){Q(t);Z({title:"Data Loaded",description:"Loaded ".concat(t.length," data points for analysis.")})}else{Z({title:"No Data Available",description:"No data points with values found in the checklist.",variant:"destructive"})}}catch(e){Z({title:"Error Loading Data",description:"Failed to parse checklist data.",variant:"destructive"})}}else{Z({title:"No Checklist Found",description:"No checklist data found. Please generate and save a checklist first.",variant:"destructive"})}a(false)};const ei=(e,s)=>{const t=e[s];if(typeof t==="number")return t;if(typeof t==="string"){if(s==="height"||s==="width"){return Number.parseFloat(t.replace("m",""))}else if(s==="pga"){return Number.parseFloat(t.replace("g",""))}else if(s==="slopeRatio"){const e=t.split(":")[1];return Number.parseFloat(e)}else if(s==="relativeDensity"){return Number.parseFloat(t.replace("Dr=","").replace("%",""))}else if(s==="inclination"){return Number.parseFloat(t.replace(" degrees","").replace(" degree",""))}else if(s==="groundwater"||s==="h1h2Ratio"){return Number.parseFloat(t)}else{const e=Number.parseFloat(t);return isNaN(e)?0:e}}return 0};const el=()=>{if(e.length===0)return{data:[]};const s={};e.forEach(e=>{const t=String(e[u]||"Unknown");if(!s[t]){s[t]=[]}s[t].push({x:ei(e,l),y:ei(e,c)})});const t=Object.entries(s).map(e=>{let[s,t]=e;return{name:s,data:t}});return{data:t}};const en=()=>{if(e.length===0)return{data:[],categories:[]};const s={};e.forEach(e=>{const t=String(e[l]||"Unknown");const a=String(e[u]||"Unknown");if(!s[a]){s[a]={}}if(!s[a][t]){s[a][t]=[]}s[a][t].push(ei(e,c))});const t=Object.entries(s).map(e=>{let[s,t]=e;return{name:s,data:Object.entries(t).map(e=>{let[s,t]=e;return{x:s,y:t.reduce((e,s)=>e+s,0)/t.length}})}});const a=Array.from(new Set(e.map(e=>String(e[l]||"Unknown")))).sort();return{data:t,categories:a}};const em=()=>{return en()};const ep=()=>{if(e.length===0)return[];const s={};e.forEach(e=>{const t=String(e[l]||"Unknown");if(!s[t]){s[t]=0}s[t]+=ei(e,c)});return Object.entries(s).map(e=>{let[s,t]=e;return{name:s,value:t}})};const ef=()=>{if(e.length===0)return;const s=new Set;e.forEach(e=>{Object.keys(e).forEach(e=>{if(!e.startsWith("_")&&e!=="id"&&e!=="selected"&&e!=="analysisColumns"){s.add(e)}})});const t=Array.from(s);let a=t.join(",")+"\n";e.forEach(e=>{const s=t.map(s=>{const t=e[s];if(typeof t==="string"&&t.includes(",")){return'"'.concat(t,'"')}return t!==undefined?t:""});a+=s.join(",")+"\n"});const r=new Blob([a],{type:"text/csv;charset=utf-8;"});const i=URL.createObjectURL(r);const l=document.createElement("a");l.setAttribute("href",i);l.setAttribute("download","analysis_data.csv");l.style.visibility="hidden";document.body.appendChild(l);l.click();document.body.removeChild(l);Z({title:"Data Exported",description:"Successfully exported ".concat(e.length," data points as CSV.")})};const{data:eg}=el();const{data:ej,categories:ev}=en();const{data:ey,categories:eN}=em();const eS=ep();return(0,r.jsxs)("div",{className:"space-y-6",children:[P&&(0,r.jsxs)(U,{variant:"warning",children:[(0,r.jsx)(G.A,{className:"h-4 w-4"}),(0,r.jsx)(q,{children:"No Imported Data Found"}),(0,r.jsx)(X,{children:'No imported data was found for analysis. Please import data in the Checklist tab by selecting items and using the "Batch Import" button, or by importing individual items.'})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"show-only-imported",checked:F,onChange:e=>I(e.target.checked),className:"rounded border-gray-300"}),(0,r.jsx)(e4,{htmlFor:"show-only-imported",children:"Show Only Imported Data"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"show-raw-data",checked:L,onChange:e=>H(e.target.checked),className:"rounded border-gray-300"}),(0,r.jsx)(e4,{htmlFor:"show-raw-data",children:"Show Raw Data Table"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(h,{variant:"outline",onClick:ef,disabled:e.length===0,children:[(0,r.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Export Data"]}),(0,r.jsx)(h,{onClick:er,disabled:t,children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Refresh Data"]})})]})]}),M.length>0&&(0,r.jsxs)(U,{children:[(0,r.jsx)(sJ.A,{className:"h-4 w-4"}),(0,r.jsx)(q,{children:"Custom Analysis Columns Detected"}),(0,r.jsxs)(X,{children:[M.length," custom columns were detected from your imported data. These columns are now available for selection in the analysis tools."]})]}),L&&e.length>0&&(0,r.jsxs)(x,{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"font-medium flex items-center",children:[(0,r.jsx)(sr.A,{className:"h-5 w-5 mr-2 text-blue-500"}),"Raw Data Table"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Showing ",Math.min(e.length,100)," of ",e.length," rows"]})]}),(0,r.jsx)("div",{className:"overflow-x-auto border rounded-md",children:(0,r.jsxs)(ec,{children:[(0,r.jsx)(ed,{children:(0,r.jsx)(eh,{children:E.map(e=>(0,r.jsxs)(ex,{className:"whitespace-nowrap",children:[e," ",M.includes(e)&&"(Custom)"]},e))})}),(0,r.jsx)(eo,{children:e.slice(0,100).map((e,s)=>(0,r.jsx)(eh,{children:E.map(s=>(0,r.jsx)(eu,{className:"truncate max-w-[150px]",children:e[s]!==undefined?String(e[s]):"-"},s))},s))})]})}),e.length>100&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"* Showing first 100 rows only. Export data to view all rows."})]}),(0,r.jsxs)(sc,{defaultValue:"3d",className:"w-full",children:[(0,r.jsxs)(sd,{className:"grid w-full grid-cols-5 mb-4",children:[(0,r.jsx)(so,{value:"3d",children:"3D Visualization"}),(0,r.jsx)(so,{value:"correlation",children:"Correlation Analysis"}),(0,r.jsx)(so,{value:"scatter",children:"Scatter Plot"}),(0,r.jsx)(so,{value:"bar",children:"Bar Chart"}),(0,r.jsx)(so,{value:"line",children:"Line Chart"})]}),(0,r.jsxs)(sm,{value:"3d",className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"x-axis",children:"X-Axis Parameter"}),(0,r.jsxs)(eb,{value:l,onValueChange:e=>n(e),children:[(0,r.jsx)(ek,{id:"x-axis",children:(0,r.jsx)(ew,{placeholder:"Select X-Axis"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"y-axis",children:"Y-Axis Parameter"}),(0,r.jsxs)(eb,{value:c,onValueChange:e=>d(e),children:[(0,r.jsx)(ek,{id:"y-axis",children:(0,r.jsx)(ew,{placeholder:"Select Y-Axis"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"z-axis",children:"Z-Axis Parameter"}),(0,r.jsxs)(eb,{value:o,onValueChange:e=>m(e),children:[(0,r.jsx)(ek,{id:"z-axis",children:(0,r.jsx)(ew,{placeholder:"Select Z-Axis"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"color-by",children:"Color By"}),(0,r.jsxs)(eb,{value:u,onValueChange:e=>p(e),children:[(0,r.jsx)(ek,{id:"color-by",children:(0,r.jsx)(ew,{placeholder:"Select Color Parameter"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"size-by",children:"Size By"}),(0,r.jsxs)(eb,{value:f,onValueChange:e=>g(e),children:[(0,r.jsx)(ek,{id:"size-by",children:(0,r.jsx)(ew,{placeholder:"Select Size Parameter"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(e4,{htmlFor:"point-size",children:["Point Size: ",D]}),(0,r.jsx)(sW,{id:"point-size",min:1,max:20,step:1,value:[D],onValueChange:e=>R(e[0])})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"auto-rotate",checked:A,onChange:e=>C(e.target.checked),className:"rounded border-gray-300"}),(0,r.jsx)(e4,{htmlFor:"auto-rotate",children:"Auto Rotate"})]}),A&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(e4,{htmlFor:"rotation-speed",children:["Speed: ",y.toFixed(1)]}),(0,r.jsx)(sW,{id:"rotation-speed",min:.1,max:2,step:.1,value:[y],onValueChange:e=>{N(e[0]);if(Y.current){Y.current.autoRotateSpeed=e[0]*5}},className:"w-32"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(h,{variant:"outline",size:"sm",onClick:ea,children:[(0,r.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Export Image"]}),(0,r.jsxs)(h,{variant:"outline",size:"sm",onClick:()=>es(),children:[(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,r.jsx)(x,{className:"p-0 overflow-hidden",children:(0,r.jsx)("div",{ref:W,className:"w-full h-[500px] relative",children:e.length===0&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No data points available for 3D visualization"})})})})]}),(0,r.jsx)(sm,{value:"correlation",className:"space-y-6",children:(0,r.jsxs)(x,{className:"p-4",children:[(0,r.jsxs)("h3",{className:"font-medium mb-4",children:["Parameter Correlation with ",o]}),j.length===0?(0,r.jsx)("div",{className:"flex items-center justify-center h-[200px] text-gray-500",children:"No data available for correlation analysis"}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Correlation coefficient ranges from -1 to 1. Values closer to -1 or 1 indicate stronger correlation.",e.length>1e3&&" For performance reasons, correlation is calculated using a random sample of 1000 data points."]}),(0,r.jsx)("div",{className:"space-y-2",children:j.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"w-1/4 font-medium",children:[e.parameter," ",M.includes(e.parameter)&&"(Custom)",":"]}),(0,r.jsxs)("div",{className:"w-3/4 flex items-center",children:[(0,r.jsxs)("div",{className:"h-6 relative flex items-center",style:{width:"100%"},children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-1/2 w-[1px] bg-gray-400"}),(0,r.jsx)("div",{className:"absolute inset-y-0 ".concat(e.correlation<0?"right-1/2":"left-1/2"),style:{width:"".concat(Math.abs(e.correlation)*50,"%"),backgroundColor:e.correlation<0?"#ef4444":"#3b82f6"}})]}),(0,r.jsx)("span",{className:"ml-2 font-mono",children:e.correlation.toFixed(3)})]})]},s))}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h4",{className:"font-medium mb-2",children:"Interpretation"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-sm",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Strong positive correlation"})," (close to 1): As this parameter increases, ",o,"value tends to increase."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Strong negative correlation"})," (close to -1): As this parameter increases,",o," value tends to decrease."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Weak correlation"})," (close to 0): This parameter has little relationship with",o," value."]})]})]})]})]})}),(0,r.jsxs)(sm,{value:"scatter",className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"scatter-x",children:"X-Axis Parameter"}),(0,r.jsxs)(eb,{value:l,onValueChange:e=>n(e),children:[(0,r.jsx)(ek,{id:"scatter-x",children:(0,r.jsx)(ew,{placeholder:"Select X-Axis"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"scatter-y",children:"Y-Axis Parameter"}),(0,r.jsxs)(eb,{value:c,onValueChange:e=>d(e),children:[(0,r.jsx)(ek,{id:"scatter-y",children:(0,r.jsx)(ew,{placeholder:"Select Y-Axis"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"scatter-color",children:"Group By"}),(0,r.jsxs)(eb,{value:u,onValueChange:e=>p(e),children:[(0,r.jsx)(ek,{id:"scatter-color",children:(0,r.jsx)(ew,{placeholder:"Select Group Parameter"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]})]}),(0,r.jsx)(x,{className:"p-4",children:(0,r.jsx)("div",{className:"h-[400px]",children:e.length===0?(0,r.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No data points available for scatter analysis"}):(0,r.jsx)(sM,{data:eg,yAxisWidth:40,showLegend:true,showXAxis:true,showYAxis:true,showGridLines:true,showTooltip:true})})})]}),(0,r.jsxs)(sm,{value:"bar",className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"bar-x",children:"X-Axis Parameter"}),(0,r.jsxs)(eb,{value:l,onValueChange:e=>n(e),children:[(0,r.jsx)(ek,{id:"bar-x",children:(0,r.jsx)(ew,{placeholder:"Select X-Axis"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"bar-y",children:"Y-Axis Parameter"}),(0,r.jsxs)(eb,{value:c,onValueChange:e=>d(e),children:[(0,r.jsx)(ek,{id:"bar-y",children:(0,r.jsx)(ew,{placeholder:"Select Y-Axis"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"bar-group",children:"Group By"}),(0,r.jsxs)(eb,{value:u,onValueChange:e=>p(e),children:[(0,r.jsx)(ek,{id:"bar-group",children:(0,r.jsx)(ew,{placeholder:"Select Group Parameter"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]})]}),(0,r.jsx)(x,{className:"p-4",children:(0,r.jsx)("div",{className:"h-[400px]",children:e.length===0?(0,r.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No data points available for bar chart analysis"}):(0,r.jsx)(sz,{data:ej,categories:ev,index:"x",yAxisWidth:40,showLegend:true,showXAxis:true,showYAxis:true,showGridLines:true,showTooltip:true})})})]}),(0,r.jsxs)(sm,{value:"line",className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"line-x",children:"X-Axis Parameter"}),(0,r.jsxs)(eb,{value:l,onValueChange:e=>n(e),children:[(0,r.jsx)(ek,{id:"line-x",children:(0,r.jsx)(ew,{placeholder:"Select X-Axis"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"line-y",children:"Y-Axis Parameter"}),(0,r.jsxs)(eb,{value:c,onValueChange:e=>d(e),children:[(0,r.jsx)(ek,{id:"line-y",children:(0,r.jsx)(ew,{placeholder:"Select Y-Axis"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(e4,{htmlFor:"line-group",children:"Group By"}),(0,r.jsxs)(eb,{value:u,onValueChange:e=>p(e),children:[(0,r.jsx)(ek,{id:"line-group",children:(0,r.jsx)(ew,{placeholder:"Select Group Parameter"})}),(0,r.jsx)(eC,{children:E.map(e=>(0,r.jsxs)(eR,{value:e,children:[e," ",M.includes(e)&&"(Custom)"]},e))})]})]})]}),(0,r.jsx)(x,{className:"p-4",children:(0,r.jsx)("div",{className:"h-[400px]",children:e.length===0?(0,r.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No data points available for line chart analysis"}):(0,r.jsx)(sE,{data:ey,categories:eN,index:"x",yAxisWidth:40,showLegend:true,showXAxis:true,showYAxis:true,showGridLines:true,showTooltip:true})})})]})]})]})}var sq=t(5156);var sX=t(1755);var sK=t(32091);var sZ=t(48475);var sQ=t(2532);function s$(e){let{className:s,size:t="md",variant:a="default",showText:i=true}=e;const l={sm:{logo:24,text:"text-sm"},md:{logo:32,text:"text-base"},lg:{logo:48,text:"text-xl"},xl:{logo:64,text:"text-2xl"}};const n=l[t].logo;const c=l[t].text;return(0,r.jsxs)("div",{className:o("flex items-center",s),children:[(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("svg",{width:n,height:n,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-primary",children:[(0,r.jsx)("circle",{cx:"32",cy:"32",r:"30",fill:"currentColor",fillOpacity:"0.1"}),(0,r.jsx)("path",{d:"M10 40L22 28L32 38L42 28L54 40",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M10 44C14 42 18 46 22 44C26 42 30 46 34 44C38 42 42 46 46 44C50 42 54 46 58 44",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),a==="default"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("circle",{cx:"22",cy:"28",r:"2",fill:"currentColor"}),(0,r.jsx)("circle",{cx:"32",cy:"38",r:"2",fill:"currentColor"}),(0,r.jsx)("circle",{cx:"42",cy:"28",r:"2",fill:"currentColor"}),(0,r.jsx)("circle",{cx:"16",cy:"34",r:"1.5",fill:"currentColor"}),(0,r.jsx)("circle",{cx:"28",cy:"32",r:"1.5",fill:"currentColor"}),(0,r.jsx)("circle",{cx:"38",cy:"32",r:"1.5",fill:"currentColor"}),(0,r.jsx)("circle",{cx:"48",cy:"34",r:"1.5",fill:"currentColor"})]}),(0,r.jsx)("path",{d:"M20 20L26 26L36 16",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]})}),i&&(0,r.jsxs)("div",{className:"ml-2 flex flex-col",children:[(0,r.jsx)("span",{className:o("font-bold tracking-tight leading-none",c),children:"DCA"}),t!=="sm"&&(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 leading-tight",children:"Dike Checklist Analyzer"})]})]})};function s0(){const e=["mindmap","checklist","data-collection","advanced-analytics"];const[s,t]=(0,i.useState)(e[0]);const[a,l]=(0,i.useState)(0);const n=()=>{const r=e.indexOf(s);if(r<e.length-1){const s=e[r+1];t(s);l(Math.max(a,r+1))}};const c=()=>{const a=e.indexOf(s);if(a>0){const s=e[a-1];t(s)}};const d=e=>{console.log("Tab changed to:",e);t(e)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-gray-100 to-gray-200 dark:from-gray-950 dark:via-gray-900 dark:to-gray-800",children:[(0,r.jsx)("header",{className:"bg-background text-foreground shadow-md border-b border-border sticky top-0 z-10",children:(0,r.jsx)("div",{className:"container mx-auto py-6 px-4",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(s$,{size:"lg"}),(0,r.jsx)("div",{className:"ml-4",children:(0,r.jsx)("p",{className:"max-w-2xl",children:"AI-Powered tool for dike settlement analysis, data organization, and 3D visualization"})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm",children:"Ready to analyze"}),(0,r.jsxs)("span",{className:"relative flex h-3 w-3",children:[(0,r.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),(0,r.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]})]})]})})}),(0,r.jsxs)("main",{className:"container mx-auto py-8 px-4 pb-20 md:pb-8",children:[" ",(0,r.jsxs)(sc,{value:s,onValueChange:d,className:"w-full",children:[(0,r.jsx)("div",{className:"mb-8 overflow-x-auto pb-2",children:(0,r.jsxs)(sd,{className:"grid min-w-max w-full grid-cols-4 p-1 bg-muted text-muted-foreground rounded-xl",children:[(0,r.jsxs)(so,{value:"mindmap",className:"flex items-center justify-center gap-2 py-3 rounded-lg data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm transition-all duration-200",children:[(0,r.jsx)(sq.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Mind Map"})]}),(0,r.jsxs)(so,{value:"checklist",className:"flex items-center justify-center gap-2 py-3 rounded-lg data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm transition-all duration-200",children:[(0,r.jsx)(sX.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Generated Checklist"})]}),(0,r.jsxs)(so,{value:"data-collection",className:"flex items-center justify-center gap-2 py-3 rounded-lg data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm transition-all duration-200",children:[(0,r.jsx)(sK.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Data Collection"})]}),(0,r.jsxs)(so,{value:"advanced-analytics",className:"flex items-center justify-center gap-2 py-3 rounded-lg data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm transition-all duration-200",children:[(0,r.jsx)(sJ.A,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Advanced Analytics"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-8",children:[(0,r.jsx)(sm,{value:"mindmap",className:"w-full mt-0 space-y-4",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:(0,r.jsxs)(x,{className:"md:col-span-3 overflow-hidden border-none shadow-lg",children:[(0,r.jsxs)(u,{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:[(0,r.jsxs)(p,{className:"flex items-center text-2xl",children:[(0,r.jsx)(sq.A,{className:"h-6 w-6 mr-2"}),"Dike Settlement Factors"]}),(0,r.jsx)(f,{className:"text-blue-100",children:"Visualize the dike settlement factors to generate comprehensive checklists"})]}),(0,r.jsxs)(g,{className:"p-6",children:[(0,r.jsx)(er,{}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,r.jsxs)(h,{onClick:c,disabled:e.indexOf(s)<=0,children:["Previous Phase ",(0,r.jsx)(sZ.A,{className:"mr-2 h-4 w-4"})]}),(0,r.jsxs)(h,{onClick:n,disabled:e.indexOf(s)>=e.length-1,children:["Next Phase ",(0,r.jsx)(sQ.A,{className:"ml-2 h-4 w-4"})]})]})]})]})})}),(0,r.jsx)(sm,{value:"checklist",className:"mt-0",children:(0,r.jsxs)(x,{className:"overflow-hidden border-none shadow-lg",children:[(0,r.jsxs)(u,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white",children:[(0,r.jsxs)(p,{className:"flex items-center text-2xl",children:[(0,r.jsx)(sX.A,{className:"h-6 w-6 mr-2"}),"Automated Checklist"]}),(0,r.jsx)(f,{className:"text-green-100",children:"All possible combinations based on dike settlement factors"})]}),(0,r.jsxs)(g,{className:"p-6",children:[(0,r.jsx)(sf,{}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,r.jsxs)(h,{onClick:c,disabled:e.indexOf(s)<=0,children:["Previous Phase ",(0,r.jsx)(sZ.A,{className:"mr-2 h-4 w-4"})]}),(0,r.jsxs)(h,{onClick:n,disabled:e.indexOf(s)>=e.length-1,children:["Next Phase ",(0,r.jsx)(sQ.A,{className:"ml-2 h-4 w-4"})]})]})]})]})}),(0,r.jsx)(sm,{value:"data-collection",className:"mt-0",children:(0,r.jsxs)(x,{className:"overflow-hidden border-none shadow-lg",children:[(0,r.jsxs)(u,{className:"bg-gradient-to-r from-amber-500 to-orange-600 text-white",children:[(0,r.jsxs)(p,{className:"flex items-center text-2xl",children:[(0,r.jsx)(sK.A,{className:"h-6 w-6 mr-2"}),"Data Collection Interface"]}),(0,r.jsx)(f,{className:"text-amber-100",children:"Input numerical data for each checklist item"})]}),(0,r.jsxs)(g,{className:"p-6",children:[(0,r.jsx)(sH,{}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,r.jsxs)(h,{onClick:c,disabled:e.indexOf(s)<=0,children:["Previous Phase ",(0,r.jsx)(sZ.A,{className:"mr-2 h-4 w-4"})]}),(0,r.jsxs)(h,{onClick:n,disabled:e.indexOf(s)>=e.length-1,children:["Next Phase ",(0,r.jsx)(sQ.A,{className:"ml-2 h-4 w-4"})]})]})]})]})}),(0,r.jsx)(sm,{value:"advanced-analytics",className:"mt-0",children:(0,r.jsxs)(x,{className:"overflow-hidden border-none shadow-lg",children:[(0,r.jsxs)(u,{className:"bg-gradient-to-r from-purple-500 to-fuchsia-600 text-white",children:[(0,r.jsxs)(p,{className:"flex items-center text-2xl",children:[(0,r.jsx)(sJ.A,{className:"h-6 w-6 mr-2"}),"Advanced Analytics"]}),(0,r.jsx)(f,{className:"text-purple-100",children:"Interactive 3D visualizations and statistical analysis"})]}),(0,r.jsxs)(g,{className:"p-6",children:[(0,r.jsx)(sU,{}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,r.jsxs)(h,{onClick:c,disabled:e.indexOf(s)<=0,children:["Previous Phase ",(0,r.jsx)(sZ.A,{className:"mr-2 h-4 w-4"})]}),(0,r.jsx)(h,{onClick:n,children:"Finish Analysis"})]})]})]})})]})]}),(0,r.jsxs)("div",{className:"mt-12 grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsx)(x,{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950 dark:to-blue-900 border-none shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer group",children:(0,r.jsxs)(g,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(sq.A,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),(0,r.jsx)(sQ.A,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 opacity-0 group-hover:opacity-100 transform group-hover:translate-x-1 transition-all"})]}),(0,r.jsx)("h3",{className:"text-lg font-medium mt-4 text-blue-800 dark:text-blue-200",children:"Mind Map"}),(0,r.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-300 mt-2",children:"Create and visualize dike settlement factors"})]})}),(0,r.jsx)(x,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950 dark:to-green-900 border-none shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer group",children:(0,r.jsxs)(g,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(sX.A,{className:"h-8 w-8 text-green-600 dark:text-green-400"}),(0,r.jsx)(sQ.A,{className:"h-5 w-5 text-green-600 dark:text-green-400 opacity-0 group-hover:opacity-100 transform group-hover:translate-x-1 transition-all"})]}),(0,r.jsx)("h3",{className:"text-lg font-medium mt-4 text-green-800 dark:text-green-200",children:"Checklist"}),(0,r.jsx)("p",{className:"text-sm text-green-600 dark:text-green-300 mt-2",children:"Generate and manage comprehensive checklists"})]})}),(0,r.jsx)(x,{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-950 dark:to-amber-900 border-none shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer group",children:(0,r.jsxs)(g,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(sK.A,{className:"h-8 w-8 text-amber-600 dark:text-amber-400"}),(0,r.jsx)(sQ.A,{className:"h-5 w-5 text-amber-600 dark:text-amber-400 opacity-0 group-hover:opacity-100 transform group-hover:translate-x-1 transition-all"})]}),(0,r.jsx)("h3",{className:"text-lg font-medium mt-4 text-amber-800 dark:text-amber-200",children:"Data Collection"}),(0,r.jsx)("p",{className:"text-sm text-amber-600 dark:text-amber-300 mt-2",children:"Collect and organize settlement data"})]})}),(0,r.jsx)(x,{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950 dark:to-purple-900 border-none shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer group",children:(0,r.jsxs)(g,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(sJ.A,{className:"h-8 w-8 text-purple-600 dark:text-purple-400"}),(0,r.jsx)(sQ.A,{className:"h-5 w-5 text-purple-600 dark:text-purple-400 opacity-0 group-hover:opacity-100 transform group-hover:translate-x-1 transition-all"})]}),(0,r.jsx)("h3",{className:"text-lg font-medium mt-4 text-purple-800 dark:text-purple-200",children:"Analytics"}),(0,r.jsx)("p",{className:"text-sm text-purple-600 dark:text-purple-300 mt-2",children:"Visualize and analyze settlement data"})]})})]})]}),(0,r.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-20 bg-background border-t border-border p-2 md:hidden",children:(0,r.jsx)(sc,{value:s,onValueChange:d,className:"w-full",children:(0,r.jsxs)(sd,{className:"grid w-full grid-cols-4 gap-1 bg-muted text-muted-foreground rounded-lg p-1",children:[(0,r.jsxs)(so,{value:"mindmap",className:"flex flex-col items-center justify-center p-2 rounded-md text-xs ".concat(s==="mindmap"?"bg-primary text-primary-foreground":"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground"),children:[(0,r.jsx)(sq.A,{className:"h-5 w-5 mb-1"}),(0,r.jsx)("span",{children:"Mind Map"})]}),(0,r.jsxs)(so,{value:"checklist",className:"flex flex-col items-center justify-center p-2 rounded-md text-xs ".concat(s==="checklist"?"bg-primary text-primary-foreground":"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground"),children:[(0,r.jsx)(sX.A,{className:"h-5 w-5 mb-1"}),(0,r.jsx)("span",{children:"Checklist"})]}),(0,r.jsxs)(so,{value:"data-collection",className:"flex flex-col items-center justify-center p-2 rounded-md text-xs ".concat(s==="data-collection"?"bg-primary text-primary-foreground":"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground"),children:[(0,r.jsx)(sK.A,{className:"h-5 w-5 mb-1"}),(0,r.jsx)("span",{children:"Data Collection"})]}),(0,r.jsxs)(so,{value:"advanced-analytics",className:"flex flex-col items-center justify-center p-2 rounded-md text-xs ".concat(s==="advanced-analytics"?"bg-primary text-primary-foreground":"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground"),children:[(0,r.jsx)(sJ.A,{className:"h-5 w-5 mb-1"}),(0,r.jsx)("span",{children:"Advanced Analytics"})]})]})})}),(0,r.jsx)("footer",{className:"bg-background border-t border-border py-6 mt-12 md:mb-0 mb-16",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(s$,{size:"sm"}),(0,r.jsx)("span",{className:"ml-2 font-semibold text-foreground",children:"Dike Checklist Analyzer"})]}),(0,r.jsx)("div",{className:"mt-4 md:mt-0",children:(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["\xa9 ",new Date().getFullYear()," DCA - All rights reserved"]})})]})})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[970,667,826,545,80,358],()=>s(13489));var t=e.O();_N_E=t}]);